import{d as te,u as ue,B as he,r as x,C as ye,b as i,c as a,e,t as r,n as ee,f as h,m as d,F,_ as se,v as N,l as xe,o as be,q as ke,g as ce,p as K,h as Ce,x as L,H as Pe,G as O,I as re,y as I,z as we,A as Ie}from"./index-DYPiONQN.js";import{A as De,P as Te,B as Se}from"./back-icon-BgRy0Fa2.js";const Ve="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%20preserveAspectRatio='xMidYMid'%20width='200'%20height='200'%20style='shape-rendering:%20auto;%20display:%20block;'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cg%3e%3cg%20transform='translate(80,50)'%3e%3cg%20transform='rotate(0)'%3e%3ccircle%20fill-opacity='1'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.875s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.875s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(71.21320343559643,71.21320343559643)'%3e%3cg%20transform='rotate(45)'%3e%3ccircle%20fill-opacity='0.875'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.75s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.75s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(50,80)'%3e%3cg%20transform='rotate(90)'%3e%3ccircle%20fill-opacity='0.75'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.625s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.625s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(28.786796564403577,71.21320343559643)'%3e%3cg%20transform='rotate(135)'%3e%3ccircle%20fill-opacity='0.625'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.5s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.5s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(20,50.00000000000001)'%3e%3cg%20transform='rotate(180)'%3e%3ccircle%20fill-opacity='0.5'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.375s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.375s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(28.78679656440357,28.786796564403577)'%3e%3cg%20transform='rotate(225)'%3e%3ccircle%20fill-opacity='0.375'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.25s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.25s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(49.99999999999999,20)'%3e%3cg%20transform='rotate(270)'%3e%3ccircle%20fill-opacity='0.25'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.125s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.125s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(71.21320343559643,28.78679656440357)'%3e%3cg%20transform='rotate(315)'%3e%3ccircle%20fill-opacity='0.125'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='0s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='0s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/g%3e%3c!--%20[ldio]%20generated%20by%20https://loading.io%20--%3e%3c/svg%3e",Ne="/assets/acceptet-BiKVjkxi.svg",Ae={class:"balance-panel"},$e={class:"balance-hint"},je={class:"balance__wrapper"},Be={key:0,style:{display:"flex",justifyContent:"center"}},Me=te({__name:"DonateBalance",props:{popupState:{type:Function}},setup(T){var P;const s=ue(),p=T,S=he(()=>{var D,w;const y=((w=(D=s.user)==null?void 0:D.posts_balance)==null?void 0:w.toString().length)||0;return y<5?"44px":y<8?"39px":y<12?"34px":y<15?"29px":"24px"}),C=x(((P=s.user)==null?void 0:P.posts_balance)||0);function u(y){const D=C.value,w=y-D;let H=900;w<=10&&(H=300);const q=performance.now();function E(R){const W=R-q,_=Math.min(W/H,1);C.value=Math.round(D+w*_),_<1&&requestAnimationFrame(E)}requestAnimationFrame(E)}ye(()=>{var y;return((y=s.user)==null?void 0:y.posts_balance)??0},y=>{u(y)},{immediate:!0});const v=()=>{p.popupState("change")};return(y,D)=>{var w;return i(),a(F,null,[e("div",Ae,[e("span",$e,r(y.$t("account.yourDonateBalance")),1),e("div",je,[e("div",{class:"balance",style:ee({fontSize:S.value})},r(C.value.toLocaleString()),5)])]),((w=h(s).user)==null?void 0:w.posts_balance)!=null&&h(s).user.posts_balance>0?(i(),a("div",Be,[e("div",{style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},[e("button",{class:"boost-purchase-button",onClick:v},"–û–±–º–µ–Ω—è—Ç—å")])])):d("",!0)],64)}}}),Le=se(Me,[["__scopeId","data-v-14da8650"]]),ze="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M3%2010C3%206.22876%203%204.34315%204.17157%203.17157C5.34315%202%207.22876%202%2011%202H13C16.7712%202%2018.6569%202%2019.8284%203.17157C21%204.34315%2021%206.22876%2021%2010V14C21%2017.7712%2021%2019.6569%2019.8284%2020.8284C18.6569%2022%2016.7712%2022%2013%2022H11C7.22876%2022%205.34315%2022%204.17157%2020.8284C3%2019.6569%203%2017.7712%203%2014V10ZM6%2012C6%2010.5858%206%209.87868%206.43934%209.43934C6.87868%209%207.58579%209%209%209H15C16.4142%209%2017.1213%209%2017.5607%209.43934C18%209.87868%2018%2010.5858%2018%2012V16C18%2017.4142%2018%2018.1213%2017.5607%2018.5607C17.1213%2019%2016.4142%2019%2015%2019H9C7.58579%2019%206.87868%2019%206.43934%2018.5607C6%2018.1213%206%2017.4142%206%2016V12ZM7%205.25C6.58579%205.25%206.25%205.58579%206.25%206C6.25%206.41421%206.58579%206.75%207%206.75H12C12.4142%206.75%2012.75%206.41421%2012.75%206C12.75%205.58579%2012.4142%205.25%2012%205.25H7Z'%20fill='%231C274C'/%3e%3c/svg%3e",Ue={class:"navMenu"},Fe={class:"nav-btn__wrapper"},Re=["src"],We=["src"],Oe=["src"],He=["src"],Ee={class:"nav-btn__text"},Ye={key:3,class:"nav-btn__text-item"},Ge=te({__name:"NavMenu",props:{pageState:{}},emits:["change-page-state"],setup(T,{emit:s}){const p=T,S=s,C=u=>{u!==p.pageState&&S("change-page-state",u)};return(u,v)=>(i(),a("div",Ue,[e("div",Fe,[p.pageState!="userposts"?(i(),a("button",{key:0,class:N(["post-component__nav-btn feed",{active:p.pageState==="posts"}]),onClick:v[0]||(v[0]=P=>C("posts"))},[e("img",{src:h(ze)},null,8,Re)],2)):d("",!0),p.pageState!="userposts"?(i(),a("button",{key:1,class:N(["post-component__nav-btn compose",{active:p.pageState==="create"}]),onClick:v[1]||(v[1]=P=>C("create"))},[e("img",{src:h(De)},null,8,We)],2)):d("",!0),p.pageState!="userposts"?(i(),a("button",{key:2,class:N(["post-component__nav-btn profile",{active:p.pageState==="myposts"}]),onClick:v[2]||(v[2]=P=>C("myposts"))},[e("img",{src:h(Te)},null,8,Oe)],2)):(i(),a("button",{key:3,class:"post-component__nav-btn profile",onClick:v[3]||(v[3]=P=>C("posts"))},[e("img",{src:h(Se)},null,8,He)]))]),e("div",Ee,[p.pageState!="userposts"?(i(),a("span",{key:0,class:N(["nav-btn__text-item",{active:p.pageState==="posts"}])},"Posts",2)):d("",!0),p.pageState!="userposts"?(i(),a("span",{key:1,class:N(["nav-btn__text-item",{active:p.pageState==="create"}])},"Write",2)):d("",!0),p.pageState!="userposts"?(i(),a("span",{key:2,class:N(["nav-btn__text-item",{active:p.pageState==="myposts"}])},"Profile",2)):(i(),a("span",Ye,"Back"))])]))}}),Ke=se(Ge,[["__scopeId","data-v-2b579962"]]),b=T=>(we("data-v-ac0745e0"),T=T(),Ie(),T),qe=b(()=>e("div",{class:"Bg"},null,-1)),Ze={key:0,class:"createPostMenu"},Xe={id:"progressbar"},Je={class:"createForm"},Qe={key:0,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},et=b(()=>e("span",{style:{fontWeight:"bold",marginTop:"15px"}},"‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ 1 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ",-1)),tt={class:"sec-center",style:{marginTop:"20px"}},st=b(()=>e("input",{class:"dropdown",type:"checkbox",id:"dropdown",name:"dropdown"},null,-1)),nt={class:"for-dropdown",for:"dropdown"},ot={class:"section-dropdown"},it=b(()=>e("i",{class:"uil uil-arrow-right"},"üó≥Ô∏è",-1)),at={key:1,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},lt=b(()=>e("label",{for:"fname"},"–û–ø–∏—Å–∞–Ω–∏–µ(–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",-1)),ct={key:2,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},rt={key:0,style:{display:"flex",alignItems:"center"}},ut=b(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"–ü–ª–∞—Ç–Ω—ã–π –ø–æ—Å—Ç (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",-1)),dt={class:"checkbox-wrapper-7",style:{marginLeft:"20px"}},pt=b(()=>e("label",{class:"tgl-btn",for:"cb2-7"},null,-1)),ft={key:1,style:{display:"flex",alignItems:"center",flexDirection:"column"}},vt=b(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"–¶–µ–Ω–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è (–≤ üçÜ):",-1)),mt={key:2,style:{marginTop:"50px",textAlign:"center"}},gt=b(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"–¶–µ–Ω–∞ –∑–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫—É:",-1)),_t=b(()=>e("div",{style:{marginTop:"50px",textAlign:"center"}},[e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"–°—Ç–æ–∏–º–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞: 1000üçÜ")],-1)),ht={key:3},yt={key:0,style:{display:"flex",flexDirection:"column"}},xt=["src"],bt=b(()=>e("span",{style:{fontSize:"17px",fontWeight:"bold",marginTop:"10px"}},"–ü–æ–¥–æ–∂–¥–∏—Ç–µ, –º—ã –∑–∞–≥—Ä—É–∂–∞–µ–º –≤–∞—à –ø–æ—Å—Ç...",-1)),kt={key:1},Ct=["src"],Pt={key:0,style:{display:"flex",justifyContent:"center"}},wt={key:1,class:"boosts"},It={class:"post"},Dt={class:"ownerData"},Tt=["src","onClick"],St=["onClick"],Vt=["src"],Nt={class:"postDescription"},At={key:0,class:"unlock",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},$t={style:{fontSize:"14px"}},jt=["onClick"],Bt={key:1,class:"donations",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},Mt={class:"donation__counter"},Lt=["onClick"],zt={key:2},Ut={class:"vote__counter"},Ft={class:"vote__counter-actions"},Rt={style:{display:"felx",flexDirection:"column",justifyContent:"center",textAlign:"center"}},Wt={style:{fontSize:"18px"}},Ot=["onClick"],Ht={style:{display:"felx",flexDirection:"column",justifyContent:"center",textAlign:"center"}},Et={style:{fontSize:"18px"}},Yt=["onClick"],Gt={style:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"15px"}},Kt=["onClick"],qt={key:2,class:"boosts"},Zt={style:{fontSize:"20px",fontWeight:"bold",margin:"0 auto"}},Xt={class:"post"},Jt={class:"ownerData"},Qt=["src"],es=["src"],ts={class:"postDescription"},ss={key:0,class:"unlock",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},ns={style:{fontSize:"14px"}},os=["onClick"],is={key:1,class:"donations",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},as={class:"donation__counter"},ls=["onClick"],cs={key:2},rs={class:"vote__counter"},us={class:"vote__counter-actions"},ds={style:{display:"felx",flexDirection:"column",justifyContent:"center",textAlign:"center"}},ps={style:{fontSize:"18px"}},fs=["onClick"],vs={style:{display:"felx",flexDirection:"column",justifyContent:"center",textAlign:"center"}},ms={style:{fontSize:"18px"}},gs=["onClick"],_s={style:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"15px"}},hs=["onClick"],ys={class:"popup-content"},xs={class:"popup-header"},bs=b(()=>e("svg",{class:"close-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"16px",height:"16px"},[e("path",{d:"M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"})],-1)),ks=[bs],Cs={key:0,class:"popup-body"},Ps=b(()=>e("p",null,"Price:",-1)),ws={key:1,class:"popup-body"},Is={class:"slidecontainer",style:{marginTop:"30px"}},Ds=["max"],Ts={key:2,class:"popup-body"},Ss=b(()=>e("p",null," –ù–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –ø–æ—Å—Ç? ",-1)),Vs={class:"slidecontainer",style:{marginTop:"30px"}},Ns=["max"],As={key:3},$s=["src"],js={key:0},Bs={key:4},Ms={class:"slidecontainer",style:{marginTop:"30px"}},Ls=["max"],zs={key:3,class:"myPosts"},Us=["onClick"],Fs=b(()=>e("div",{class:"icon-box",style:{fontSize:"27px"}},"üåê",-1)),Rs={class:"text-container",style:{display:"flex",justifyContent:"center"}},Ws={style:{marginLeft:"11px"}},Os=te({__name:"Posts",setup(T){xe();const s=ue();s.getBoosts(),x(!1),x(!1);const p=x("posts"),S=x(!1),C=x(!1),u=x({image:null,isPrivate:!1,description:"",type:"vote",price:0,votePrice:0}),v=x(0),P=[{id:0,isActive:!0,text:"Add image"},{id:1,isActive:!1,text:"Write description"},{id:2,isActive:!1,text:"Choose Details"}],y=o=>{if(s.posts==null)return[];const n=s.posts.filter(c=>c.Type!=="vote").sort((c,f)=>f.Donated-c.Donated),l=s.posts.filter(c=>c.Type==="vote").sort((c,f)=>f.VoteYes+f.VoteNo-(c.VoteYes+c.VoteNo));return[...n,...l]};async function D(){try{await Promise.all([s.getMyBoughtPosts(),s.getPosts().then(o=>{if(o){if(s.posts==null)return;let n=y(s.posts);s.posts=n;const l=s.posts.filter(m=>m.Type==="donate"),c=s.posts.filter(m=>m.Type==="vote"),f=[];for(;l.length>0||c.length>0;){if(l.length>0){const m=l.shift();m!==void 0&&f.push(m)}if(c.length>0){const m=c.shift();m!==void 0&&f.push(m)}}s.posts=f}}),s.getMyPosts()])}catch(o){console.error("Error fetching user data:",o)}}be(()=>{p.value="posts",D()});const w=o=>{o!==p.value&&(p.value=o)},H=o=>{const l=o.target.files;if(l&&l.length>0){const c=l[0],f=new FileReader;f.onload=m=>{var t;const V=new Image;V.onload=()=>{const j=document.createElement("canvas"),k=j.getContext("2d"),J=1024,Q=1024;let B=V.width,M=V.height;B>M?B>J&&(M*=J/B,B=J):M>Q&&(B*=Q/M,M=Q),j.width=B,j.height=M,k!=null&&k.drawImage(V,0,0,B,M),j.toBlob(le=>{le&&(u.value.image=new File([le],c.name,{type:c.type}),C.value=!0)},c.type,.8)},V.src=(t=m.target)==null?void 0:t.result},f.readAsDataURL(c)}},q=o=>{console.log(1);const l=o.target.value;l&&(u.value.description=l),console.log(u)},E=()=>{v.value!==0&&(C.value=!1),v.value++,P[v.value].isActive=!0},R=x(!1),W=()=>{if(s.user){if(s.user.balance<1e3){I().showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ üçÜ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞");return}if(u.value.type!="vote"){if(u.value.price<=0&&u.value.isPrivate){I().showAlert("–°—Ç–æ–∏–º–æ—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Å—Ç–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å 0 üçÜ");return}}else if(u.value.votePrice<10){I().showAlert("–°—Ç–æ–∏–º–æ—Å—Ç—å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è –ø–æ—Å—Ç–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω—å—à–µ 10 üçÜ");return}if(u.value.isPrivate=S.value,u.value.image!=null){const o={image:u.value.image,isPrivate:u.value.isPrivate,description:u.value.description,price:u.value.price,type:u.value.type,votePrice:u.value.votePrice};v.value++,s.createPost(o).then(n=>{n&&setTimeout(()=>{v.value=0,p.value="posts",P.forEach(l=>{l.id!==0&&(l.isActive=!1)}),R.value=!0,R.value=!1,s.getPosts(),s.getMyPosts()},2500)})}else I().showAlert("–ù–µ –≤—ã–±—Ä–∞–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ")}},_=x("close"),g=x({id:0,price:0,imagePath:"",decription:"",donated:0}),z=(o,n,l,c,f,m)=>{if(o=="dump"&&s.user!=null&&s.user.balance<1e3){I().showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤. –ú–∏–Ω–∏–º—É–º 1000 üçÜ");return}_.value=o,g.value.id=n,g.value.price=l,g.value.imagePath=c!==null?c:"",g.value.decription=f!==null?f:"",g.value.donated=m!==null?m:0},de=()=>{if(s.user){if(s.user.balance<g.value.price){I().showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç—É");return}console.log(g.value.id),s.unlockPost(g.value.id).then(o=>{if(o&&s.posts!=null){let n=s.posts.findIndex(l=>l.ID==g.value.id);n!=-1&&(s.posts[n].IsPrivate=!1,s.getMyBoughtPosts())}})}},ne=(o,n)=>{var l;if(s.user){if(s.posts!=null&&s.posts[s.posts.findIndex(c=>c.ID==o)].Type!="donate"||s.user.id==n||s.posts!=null&&!s.posts[s.posts.findIndex(c=>c.ID==o)].IsPrivate)return!1;if(s.posts!=null&&s.posts[s.posts.findIndex(c=>c.ID==o)].IsPrivate)if(s.boughtPosts!=null){if(s.boughtPosts.length<0)return!0;if(((l=s.boughtPosts)==null?void 0:l.length)>0)return s.boughtPosts.findIndex(c=>c.PostID==o)==-1}else return!0}},oe=(o,n)=>{if(s.user)return s.user.id==o||s.posts!=null&&!s.posts[s.posts.findIndex(l=>l.ID==n)].IsPrivate?!1:o!=s.user.id?!pe(n):!0},pe=o=>{if(s.boughtPosts!=null&&s.boughtPosts.length>0){let n=s.boughtPosts.findIndex(l=>l.PostID==o);if(console.log(n,o),n!=-1)return console.log(n),!0}return!1},A=x(0),fe=()=>{if(s.user){if(s.user.balance<Number(A.value)){I().showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç—É");return}s.donatePost(g.value.id,A.value).then(o=>{if(o&&s.posts!=null){let n=s.posts.findIndex(l=>l.ID==g.value.id);n!=-1&&(s.posts[n].Donated+=Number(A.value))}})}},ve=o=>{switch(o){case"unlock":return"Unlock post?";case"donate":return"Donate post?";case"visible":return`Post: ${g.value.id}`;case"change":return"Exchange donated dicks for basic ones?";case"dump":return"Dump post?"}},$=x(0),me=()=>{s.user&&(s.user.posts_balance!=null&&s.user.posts_balance<$.value&&I().showAlert("‚ìò –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –≤—ã–≤–æ–¥–∞!"),I().showAlert("‚ìò –°–∏—Å—Ç–µ–º–∞ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 30% –∫–æ–º–∏—Å—Å–∏—é –ø—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–µ —Å—Ä–µ–¥—Å—Ç–≤ —Å –¥–æ–Ω–∞—Ç–Ω–æ–≥–æ —Å—á—ë—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π! ‚ìò"),s.exchangeDonateMoney($.value).then(o=>{var n;o&&((n=s.user)==null?void 0:n.posts_balance)!=null&&(s.user.posts_balance-=$.value)}))},ge=o=>{u.value.type=o},_e=o=>{switch(o){case"donate":return"–î–æ–Ω–∞—Ç–Ω—ã–π üí∏";case"vote":return"–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ üó≥Ô∏è"}return""},Y=(o,n,l)=>{if(s.user){if(s.user.balance<l){I().showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ üçÜ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è");return}s.votePost(o,n).then(c=>{if(c&&s.posts!=null){let f=s.posts.findIndex(m=>m.ID==o);if(f!=-1)switch(n){case"yes":s.posts[f].VoteYes+=1;break;case"no":s.posts[f].VoteNo+=1;break}}})}},Z=o=>{o.target.blur()},G=x(0),X=o=>{s.dumpPost(o,1e3).then(n=>{n&&D()})};let U=x(void 0),ie="";const ae=o=>{s.posts&&s.posts.length>0?(U.value=s.posts.filter(n=>n.OwnerID===o),U.value!=null&&U.value&&(p.value="userposts",ie=U.value[0].OwnerName)):U.value=[]};return(o,n)=>{var c,f,m,V;const l=ke("click-outside");return i(),a(F,null,[qe,ce(Ke,{"page-state":p.value,onChangePageState:w},null,8,["page-state"]),p.value==="create"?(i(),a("div",Ze,[e("div",null,[e("ul",Xe,[(i(),a(F,null,K(P,t=>e("li",{class:N(t.isActive?"active":"")},r(t.text),3)),64))])]),e("div",Je,[v.value===0?(i(),a("div",Qe,[e("input",{class:"addFile",type:"file",onChange:H},null,32),et,e("div",tt,[st,e("label",nt,r(u.value.type==""?"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–æ—Å—Ç–∞":_e(u.value.type)),1),e("div",ot,[e("a",{onClick:n[0]||(n[0]=t=>ge("vote"))},[Ce("–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ "),it])])])])):d("",!0),v.value===1?(i(),a("div",at,[lt,L(e("input",{type:"text",id:"fname",onChange:q,name:"fname"},null,544),[[l,Z]])])):d("",!0),v.value===2?(i(),a("div",ct,[u.value.type!="vote"?(i(),a("div",rt,[ut,e("div",dt,[L(e("input",{class:"tgl tgl-ios",id:"cb2-7",type:"checkbox","onUpdate:modelValue":n[1]||(n[1]=t=>S.value=t)},null,512),[[Pe,S.value]]),pt])])):d("",!0),u.value.type=="vote"?(i(),a("div",ft,[vt,L(e("input",{type:"number",onKeydown:re(W,["enter"]),"onUpdate:modelValue":n[2]||(n[2]=t=>u.value.votePrice=t),style:{width:"100%"}},null,544),[[l,Z],[O,u.value.votePrice]])])):d("",!0),S.value?(i(),a("div",mt,[gt,L(e("input",{type:"number",onKeydown:re(W,["enter"]),"onUpdate:modelValue":n[3]||(n[3]=t=>u.value.price=t)},null,544),[[l,Z],[O,u.value.price]])])):d("",!0),_t,e("div",null,[e("button",{class:"mypost-button",style:{marginTop:"30px"},onClick:W},"–°–æ–∑–¥–∞—Ç—å")])])):d("",!0),v.value===3?(i(),a("div",ht,[R.value?(i(),a("div",kt,[e("img",{src:h(Ne)},null,8,Ct)])):(i(),a("div",yt,[e("img",{src:h(Ve)},null,8,xt),bt]))])):d("",!0)]),C.value?(i(),a("div",Pt,[e("button",{class:"mypost-button",style:{marginTop:"30px"},onClick:E},"–î–∞–ª—å—à–µ")])):d("",!0)])):d("",!0),p.value==="posts"?(i(),a("div",wt,[(i(!0),a(F,null,K(h(s).posts,(t,j)=>(i(),a("div",{key:t.ID,style:{width:"100%"}},[e("div",It,[e("div",Dt,[e("img",{src:t.AvatarURL,onClick:k=>ae(t.OwnerID)},null,8,Tt),e("span",{onClick:k=>ae(t.OwnerID)},r(t.OwnerName),9,St)]),e("div",{class:"postImage",style:ee({filter:oe(t.OwnerID,t.ID)?"blur(25px)":"blur(0px)"})},[e("img",{src:t.ImagePath,style:{maxWidth:"100%",height:"auto",width:"100%"}},null,8,Vt)],4),e("div",Nt,[e("span",null,r(t.Description),1)]),ne(t.ID,t.OwnerID)?(i(),a("div",At,[e("span",$t,"üçÜ"+r(t.Price),1),e("button",{class:"boost-purchase-button",onClick:k=>z("unlock",t.ID,t.Price,null,null,null)},"Unlock",8,jt)])):d("",!0),t.Type!="vote"?(i(),a("div",Bt,[e("span",Mt,"Donated: üçÜ"+r(t.Donated-t.Dumped),1),e("button",{class:"boost-purchase-button",onClick:k=>z("donate",t.ID,t.Price,null,null,null)},"Donate",8,Lt)])):(i(),a("div",zt,[e("div",Ut,[e("span",null,"–í—Å–µ–≥–æ: "+r((t.VoteYes+t.VoteNo)*t.VotePrice-t.Dumped)+"üçÜ",1)]),e("div",Ft,[e("div",Rt,[e("span",Wt,r(t.VoteYes)+" ‚úÖ",1),e("button",{class:"boost-purchase-button",style:{marginLeft:"15px",marginTop:"10px",height:"40px",backgroundColor:"#3f8b1e",display:"flex",justifyContent:"center",alignItems:"center"},onClick:k=>Y(t.ID,"yes",t.VotePrice)},"–î–∞ "+r(t.VotePrice)+"üçÜ",9,Ot)]),e("div",Ht,[e("span",Et,r(t.VoteNo)+" ‚ùå",1),e("button",{class:"boost-purchase-button",style:{marginRight:"15px",marginTop:"10px",height:"40px",backgroundColor:"#bc0e0e",display:"flex",justifyContent:"center",alignItems:"center"},onClick:k=>Y(t.ID,"no",t.VotePrice)},"–ù–µ—Ç "+r(t.VotePrice)+"üçÜ",9,Yt)])])])),e("div",Gt,[e("button",{class:"boost-purchase-button",style:{padding:"15px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center"},onClick:k=>X(t.ID)},"üò° Dump 1.000 üçÜ",8,Kt)])])]))),128))])):d("",!0),p.value==="userposts"?(i(),a("div",qt,[e("span",Zt," –ü–æ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "+r(h(ie)),1),(i(!0),a(F,null,K(h(U),(t,j)=>(i(),a("div",{key:t.ID,style:{width:"100%"}},[e("div",Xt,[e("div",Jt,[e("img",{src:t.AvatarURL},null,8,Qt),e("span",null,r(t.OwnerName),1)]),e("div",{class:"postImage",style:ee({filter:oe(t.OwnerID,t.ID)?"blur(25px)":"blur(0px)"})},[e("img",{src:t.ImagePath,style:{maxWidth:"100%",height:"auto",width:"100%"}},null,8,es)],4),e("div",ts,[e("span",null,r(t.Description),1)]),ne(t.ID,t.OwnerID)?(i(),a("div",ss,[e("span",ns,"üçÜ"+r(t.Price),1),e("button",{class:"boost-purchase-button",onClick:k=>z("unlock",t.ID,t.Price,null,null,null)},"Unlock",8,os)])):d("",!0),t.Type!="vote"?(i(),a("div",is,[e("span",as,"Donated: üçÜ"+r(t.Donated-t.Dumped),1),e("button",{class:"boost-purchase-button",onClick:k=>z("donate",t.ID,t.Price,null,null,null)},"Donate",8,ls)])):(i(),a("div",cs,[e("div",rs,[e("span",null,"–í—Å–µ–≥–æ: "+r((t.VoteYes+t.VoteNo)*t.VotePrice-t.Dumped)+"üçÜ",1)]),e("div",us,[e("div",ds,[e("span",ps,r(t.VoteYes)+" ‚úÖ",1),e("button",{class:"boost-purchase-button",style:{marginLeft:"15px",marginTop:"10px",height:"40px",backgroundColor:"#3f8b1e",display:"flex",justifyContent:"center",alignItems:"center"},onClick:k=>Y(t.ID,"yes",t.VotePrice)},"–î–∞ "+r(t.VotePrice)+"üçÜ",9,fs)]),e("div",vs,[e("span",ms,r(t.VoteNo)+" ‚ùå",1),e("button",{class:"boost-purchase-button",style:{marginRight:"15px",marginTop:"10px",height:"40px",backgroundColor:"#bc0e0e",display:"flex",justifyContent:"center",alignItems:"center"},onClick:k=>Y(t.ID,"no",t.VotePrice)},"–ù–µ—Ç "+r(t.VotePrice)+"üçÜ",9,gs)])])])),e("div",_s,[e("button",{class:"boost-purchase-button",style:{padding:"15px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center"},onClick:k=>X(t.ID)},"üò° Dump 1.000 üçÜ",8,hs)])])]))),128))])):d("",!0),e("div",{class:N(["boost-purchase-popup",{visible:_.value=="unlock"||_.value=="donate"||_.value=="visible"||_.value=="change"||_.value=="dump"}]),onClick:n[9]||(n[9]=()=>{_.value="close"})},[e("div",ys,[e("div",xs,[e("h2",null,r(ve(_.value)),1),e("button",{class:"close-button",onClick:n[4]||(n[4]=()=>{_.value="close"})},ks)]),_.value=="unlock"?(i(),a("div",Cs,[Ps,e("p",null,"üçÜ"+r(g.value.price),1),e("button",{class:"boost-purchase-button",style:{width:"100%"},onClick:de},"Unlock post")])):d("",!0),_.value=="donate"?(i(),a("div",ws,[e("div",Is,[L(e("input",{type:"range",min:"0",max:(c=h(s).user)==null?void 0:c.balance,class:"slider",id:"myRange","onUpdate:modelValue":n[5]||(n[5]=t=>A.value=t)},null,8,Ds),[[O,A.value]])]),e("p",null,"üçÜ"+r(A.value),1),A.value>0?(i(),a("button",{key:0,class:"boost-purchase-button",style:{width:"100%"},onClick:fe},"Donate post")):d("",!0)])):d("",!0),_.value=="dump"?(i(),a("div",Ts,[Ss,e("div",Vs,[L(e("input",{type:"range",min:"1000",max:(f=h(s).user)==null?void 0:f.balance,step:"1000",class:"slider",id:"myRange","onUpdate:modelValue":n[6]||(n[6]=t=>G.value=t)},null,8,Ns),[[O,G.value]])]),e("p",null,"üçÜ"+r(G.value),1),G.value>=1e3?(i(),a("button",{key:0,class:"boost-purchase-button",style:{width:"100%"},onClick:n[7]||(n[7]=t=>X(g.value.id))},"Dump post")):d("",!0)])):d("",!0),_.value=="visible"?(i(),a("div",As,[e("img",{src:g.value.imagePath,style:{height:"200px",width:"100%",backgroundRepeat:"no-repeat",objectFit:"contain"}},null,8,$s),g.value.decription!==""?(i(),a("p",js,r(g.value.decription),1)):d("",!0),e("p",null,"Donated: üçÜ"+r(g.value.donated),1)])):d("",!0),_.value=="change"?(i(),a("div",Bs,[e("div",Ms,[L(e("input",{type:"range",min:"0",max:((m=h(s).user)==null?void 0:m.posts_balance)!==null?(V=h(s).user)==null?void 0:V.posts_balance:0,class:"slider",id:"myRange","onUpdate:modelValue":n[8]||(n[8]=t=>$.value=t)},null,8,Ls),[[O,$.value]])]),e("p",null,"üçÜ"+r($.value),1),$.value>0?(i(),a("button",{key:0,class:"boost-purchase-button",style:{width:"100%"},onClick:me},"Exchange")):d("",!0)])):d("",!0)])],2),p.value=="myposts"?(i(),a("div",zs,[ce(Le,{popupState:z}),(i(!0),a(F,null,K(h(s).myPosts,t=>(i(),a("div",{class:"postProfile",onClick:j=>z("visible",t.ID,t.Price,t.ImagePath,t.Description,t.Donated)},[Fs,e("div",Rs,[e("span",Ws,"–ü–æ—Å—Ç: "+r(t.ID),1)])],8,Us))),256))])):d("",!0)],64)}}}),Ys=se(Os,[["__scopeId","data-v-ac0745e0"]]);export{Ys as default};
