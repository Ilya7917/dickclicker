import{d as N,u as I,r as t,o as H,J as F,z as S,b as x,c as D,e as o,B as $,K as G,n as W,v as j,x as A,y as E,_ as z}from"./index-BPEu4q_n.js";import{u as M}from"./games-D3AEx9m2.js";const y=d=>(A("data-v-cb818690"),d=d(),E(),d),L=["width","height"],T={id:"unity-loading-bar"},O=y(()=>o("div",{id:"unity-logo"},null,-1)),R={id:"unity-progress-bar-empty"},V=y(()=>o("div",{id:"unity-webgl-logo"},null,-1)),J=y(()=>o("div",{id:"unity-build-title"},"FlappyDick",-1)),K=N({__name:"GameFight",setup(d){const v=M(),i=I(),h=t("unity-desktop"),f=t(960),g=t(600),w=t("0%"),m=t(!0),_=t(0),b=t(null),r=t(null),u=t(null),c="https://taptaptap.coinclicker.app/uploads/BuildBirds",k=`${c}/buildes.loader.js`,C={dataUrl:`${c}/buildes.data`,frameworkUrl:`${c}/buildes.framework.js`,codeUrl:`${c}/buildes.wasm`,streamingAssetsUrl:`${c}/UnityServicesProjectConfiguration.json`,companyName:"DefaultCompany",productName:"FlappyDick",productVersion:"0.1",showBanner:(e,s)=>{if(u.value){const n=document.createElement("div");n.innerHTML=e,u.value.appendChild(n),s==="error"?n.style.background="red":s==="warning"&&(n.style.background="yellow"),n.style.padding="10px",setTimeout(()=>{u.value&&u.value.removeChild(n)},5e3)}}},U=e=>{w.value=`${100*e}%`,e==1&&console.log("load Finish")},B=()=>{var e;(e=r.value)==null||e.SetFullscreen(1)};H(async()=>{var s,n;if(((s=i.user)==null?void 0:s.id)!=null&&(_.value=(n=i.user)==null?void 0:n.id),/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){const a=document.createElement("meta");a.name="viewport",a.content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes",document.getElementsByTagName("head")[0].appendChild(a),h.value="unity-mobile",f.value=window.innerWidth,g.value=window.innerHeight}m.value=!0;const e=document.createElement("script");e.src=k,e.onload=async()=>{try{r.value=await createUnityInstance(b.value,C,U),m.value=!1}catch(a){alert(a)}},document.body.appendChild(e)}),F(()=>{r.value&&r.value.Quit().then(()=>{r.value=null})});const l=t({userHP:0,userName:"",enemyHP:0,enemyName:""}),p=t(0);return window.SetPlayerHP=function(e){if(i.user){if(console.log(e),i.user.balance<e){S().showAlert("Недостаточный баланс, нужно 100 🐥");return}v.setUserHP(e).then(s=>{i.user&&(i.user.balance-=e,l.value.userHP=e,s&&v.getGamesScore().then(n=>{if(l.value.userName="Bazil",console.log(n),n!=null&&n.length>0){let a=n.findIndex(P=>P.ID==_.value);a==0||a==-1?(l.value.enemyHP=100,l.value.enemyName="Computer",p.value=-1):(l.value.enemyHP=100,l.value.enemyName=n[a-1].UserName,p.value=n[a-1].UserID)}else l.value.enemyHP=100,l.value.enemyName="Computer",p.value=-1;r.value.SendMessage("LoadingWindow(Clone)","OnLoadGame")}))})}},window.SetWinner=function(e){console.log(e),v.setUserScore(Number(e)).then(s=>{console.log(s)})},window.CheckDucksForNextFight=function(){i.user&&(i.user.balance<100&&S().showAlert("Недостаточный баланс, нужно 100 🐥"),r.value.SendMessage("ResultWindow(Clone)","OnRestartGame"))},(e,s)=>(x(),D("div",{id:"unity-container",class:j(h.value)},[o("canvas",{id:"unity-canvas",ref_key:"canvas",ref:b,width:f.value,height:g.value,tabindex:"-1"},null,8,L),$(o("div",T,[O,o("div",R,[o("div",{id:"unity-progress-bar-full",style:W({width:w.value})},null,4)])],512),[[G,m.value]]),o("div",{id:"unity-warning",ref_key:"warningBanner",ref:u},null,512),o("div",{id:"unity-footer"},[V,o("div",{id:"unity-fullscreen-button",onClick:B}),J])],2))}}),X=z(K,[["__scopeId","data-v-cb818690"]]);export{X as default};
