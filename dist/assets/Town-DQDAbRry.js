import{d as B,u as F,r as t,z as N,o as U,J as C,b as I,c as E,e as a,B as M,K as T,n as x,v as O,x as P,y as $,_ as A}from"./index-BR4Cz53H.js";import{u as G}from"./games-CrbCyC7H.js";const v=d=>(P("data-v-df7f885e"),d=d(),$(),d),H=["width","height"],j={id:"unity-loading-bar"},D=v(()=>a("div",{id:"unity-logo"},null,-1)),z={id:"unity-progress-bar-empty"},J=v(()=>a("div",{id:"unity-webgl-logo"},null,-1)),V=v(()=>a("div",{id:"unity-build-title"},"FlappyDick",-1)),W=B({__name:"Town",setup(d){const g=G(),i=F(),m=t("unity-desktop"),p=t(960),h=t(600),y=t("0%"),c=t(!0),w=t(0),f=t(null),s=t(null),r=t(null),u="https://taptaptap.coinclicker.app/uploads/BuildTown",_=`${u}/buildes.loader.js`,S={dataUrl:`${u}/buildes.data`,frameworkUrl:`${u}/buildes.framework.js`,codeUrl:`${u}/buildes.wasm`,streamingAssetsUrl:"",companyName:"DefaultCompany",productName:"FlappyDick",productVersion:"0.1",showBanner:(e,n)=>{if(r.value){const o=document.createElement("div");o.innerHTML=e,r.value.appendChild(o),n==="error"?o.style.background="red":n==="warning"&&(o.style.background="yellow"),o.style.padding="10px",setTimeout(()=>{r.value&&r.value.removeChild(o)},5e3)}}},b=e=>{y.value=`${100*e}%`,e==1&&console.log("load Finish")},k=()=>{var e;(e=s.value)==null||e.SetFullscreen(1)};return window.GetSkins=function(){s.value.SendMessage("GameManager","OnInitSkins",i.skins)},window.GetLastVisit=function(){s.value.SendMessage("FoodSlider","OnSetFoodSlider",JSON.stringify(i.town))},window.GetEnergy=function(){var e,n;s.value.SendMessage("EmojiSlider","OnSetTownEmoji",JSON.stringify({energy:(e=i.user)==null?void 0:e.energy,energy_level:(n=i.user)==null?void 0:n.energy_level}))},window.IncreaseFood=function(e){if(i.user){if(i.user.balance<Number(e)){N().showAlert("Недостаточно коинов 🐥");return}g.onSetFood(Number(e)).then(n=>{if(n){if(!i.user)return;i.user.balance-=Number(e),s.value.SendMessage("FoodSlider","OnAcceptFood")}})}},U(async()=>{var n,o;if(((n=i.user)==null?void 0:n.id)!=null&&(w.value=(o=i.user)==null?void 0:o.id),/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){const l=document.createElement("meta");l.name="viewport",l.content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes",document.getElementsByTagName("head")[0].appendChild(l),m.value="unity-mobile",p.value=window.innerWidth,h.value=window.innerHeight}c.value=!0;const e=document.createElement("script");e.src=_,e.onload=async()=>{try{s.value=await createUnityInstance(f.value,S,b),c.value=!1}catch(l){alert(l)}},document.body.appendChild(e)}),C(()=>{s.value&&s.value.Quit().then(()=>{s.value=null})}),t({userHP:0,userName:"",enemyHP:0,enemyName:""}),t(0),(e,n)=>(I(),E("div",{id:"unity-container",class:O(m.value)},[a("canvas",{id:"unity-canvas",ref_key:"canvas",ref:f,width:p.value,height:h.value,tabindex:"-1"},null,8,H),M(a("div",j,[D,a("div",z,[a("div",{id:"unity-progress-bar-full",style:x({width:y.value})},null,4)])],512),[[T,c.value]]),a("div",{id:"unity-warning",ref_key:"warningBanner",ref:r},null,512),a("div",{id:"unity-footer"},[J,a("div",{id:"unity-fullscreen-button",onClick:k}),V])],2))}}),Q=A(W,[["__scopeId","data-v-df7f885e"]]);export{Q as default};
