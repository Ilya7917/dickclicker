import{d as I,b as t,c as a,e,g as x,x as B,y as $,_ as j,u as N,r as c,o as T,q as w,m as g,F as S,p as k,t as d,v as F,B as G,G as H}from"./index-Dm4aBicW.js";import{u as M}from"./games-CtqU644f.js";import{B as z}from"./back-icon-BbM4sjQV.js";import R from"./GameFight-CG1NW3f4.js";const V=v=>(B("data-v-2982bc0f"),v=v(),$(),v),A={class:"navMenu"},P={class:"nav-btn__wrapper"},E=["src"],q=V(()=>e("div",{class:"nav-btn__text"},[e("span",{class:"nav-btn__text-item"},"Back")],-1)),O=I({__name:"NavMenu",props:{pageState:{}},emits:["change-page-state"],setup(v,{emit:h}){const i=v,f=h,r=n=>{n!==i.pageState&&f("change-page-state",n)};return(n,m)=>(t(),a("div",A,[e("div",P,[e("button",{class:"post-component__nav-btn profile",onClick:m[0]||(m[0]=p=>r("games"))},[e("img",{src:x(z)},null,8,E)])]),q]))}}),W=j(O,[["__scopeId","data-v-2982bc0f"]]),J={class:"bg"},K={key:1},Q={style:{width:"85%",margin:"0 auto"}},X={class:"post",style:{display:"flex",flexDirection:"row"}},Y={style:{display:"flex",alignItems:"center",fontSize:"30px",justifyContent:"center"}},Z=["src"],ee={key:1,style:{height:"30px",width:"30px",borderRadius:"100px",background:"gray",justifyContent:"center",alignItems:"center",display:"flex"}},te={style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"}},se={class:"name",style:{marginLeft:"10px"}},ae={class:"FightDefensData",style:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:"20px"}},ne={style:{fontSize:"20px",fontWeight:"bold"}},oe={key:2},le={class:"leaderboard",style:{marginTop:"30px",display:"flex",flexDirection:"column",gap:"10px"}},ie={style:{width:"85%",margin:"0 auto"}},re={class:"post",style:{display:"flex",flexDirection:"row"}},ce={style:{display:"flex",alignItems:"center",fontSize:"30px",justifyContent:"center"}},de=["src"],pe={key:1,style:{height:"30px",width:"30px",borderRadius:"100px",background:"gray",justifyContent:"center",alignItems:"center",display:"flex"}},ue={style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"}},_e={class:"name",style:{marginLeft:"10px"}},ve={class:"popup-content"},he={class:"popup-header"},me=e("h2",null,"Пополнить ❤️",-1),ge=e("svg",{class:"close-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"16px",height:"16px"},[e("path",{d:"M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"})],-1),fe=[ge],ye=e("div",null,[e("span",null,"Количество:")],-1),xe={class:"slidecontainer",style:{marginTop:"30px"}},be=["max"],Ie=I({__name:"FightGames",setup(v){const h=M(),i=N(),f=c(!1);c("");const r=c(!1),n=c(0),m=c(0),p=c("games");c("");const L=()=>{h.updateUserHealthDefens(Number(n.value)).then(u=>{if(u){if(!i.user)return;i.user.balance-=n.value,m.value+=Number(n.value),r.value=!1,n.value=0}})},D=()=>{r.value=!1,f.value=!0},C=c(5879286931),U=u=>{p.value=u};return T(()=>{var u,o;((u=i.user)==null?void 0:u.id)!=null&&(C.value=(o=i.user)==null?void 0:o.id),h.getGamesScore().then(_=>{if(_!=null&&_.length>0){let y=_.findIndex(b=>b.UserID==C.value);y!=-1&&(m.value=_[y].DefensHealth)}})}),(u,o)=>{var _,y,b;return t(),a("div",J,[p.value=="leaderboard"?(t(),w(W,{key:0,onChangePageState:U,pageState:p.value},null,8,["pageState"])):g("",!0),!f.value&&p.value=="games"?(t(),a("div",K,[e("div",{class:"leaderboard",style:{marginTop:"30px",display:"flex",flexDirection:"column",gap:"5px"},onClick:o[0]||(o[0]=s=>p.value="leaderboard")},[(t(!0),a(S,null,k((_=x(h).gamesScore)==null?void 0:_.slice(0,3),(s,l)=>(t(),a("div",Q,[e("div",X,[e("div",Y,[e("span",null,d(l==0?"👑":l==1?"🥈":l==2?"🥉":l+1),1)]),s.UserAvatar!=""?(t(),a("img",{key:0,src:s.UserAvatar,style:{height:"50px",borderRadius:"100px"}},null,8,Z)):(t(),a("div",ee,"👤")),e("div",te,[e("span",se,d(s.UserName),1),e("span",null,d(s.Score)+"💥",1)])])]))),256))]),e("div",ae,[e("span",ne,"Health protection: "+d(m.value)+"❤️",1),e("button",{class:"boost-purchase-button",style:{width:"55%",marginTop:"30px"},onClick:o[1]||(o[1]=s=>r.value=!0)},"Добавить ❤️")]),e("div",{style:{marginTop:"40px",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},[e("button",{class:"button-19",style:{width:"auto"},onClick:D},"⚔️FIGHT (100🐥)")])])):g("",!0),p.value=="leaderboard"?(t(),a("div",oe,[e("div",le,[(t(!0),a(S,null,k(x(h).gamesScore,(s,l)=>(t(),a("div",ie,[e("div",re,[e("div",ce,[e("span",null,d(l==0?"👑":l==1?"🥈":l==2?"🥉":l+1),1)]),s.UserAvatar!=""?(t(),a("img",{key:0,src:s.UserAvatar,style:{height:"50px",borderRadius:"100px"}},null,8,de)):(t(),a("div",pe,"👤")),e("div",ue,[e("span",_e,d(s.UserName),1),e("span",null,d(s.Score)+"💥",1)])])]))),256))])])):g("",!0),r.value?(t(),a("div",{key:3,class:F(["boost-purchase-popup",{visible:r.value}])},[e("div",ve,[e("div",he,[me,e("button",{class:"close-button",onClick:o[2]||(o[2]=s=>{r.value=!1})},fe)]),ye,e("div",xe,[G(e("input",{type:"range",min:"0",max:((y=x(i).user)==null?void 0:y.balance)!==null?(b=x(i).user)==null?void 0:b.balance:0,class:"slider",id:"myRange","onUpdate:modelValue":o[3]||(o[3]=s=>n.value=s)},null,8,be),[[H,n.value]]),e("p",null,"🐥"+d(n.value),1),n.value>0?(t(),a("button",{key:0,class:"boost-purchase-button",style:{width:"100%"},onClick:L},"Exchange")):g("",!0)])])],2)):g("",!0),f.value?(t(),w(R,{key:4})):g("",!0)])}}});export{Ie as default};
