import{d as ne,u as ge,B as we,r as y,C as De,b as i,c as a,e,t as d,n as se,f as m,m as p,F as R,_ as oe,v as A,z as me,A as he,l as Ie,o as Te,q as Se,g as pe,p as G,h as fe,x as L,H as $e,G as W,I as ve,y as $}from"./index-A8RajYzA.js";import{A as Ae,P as Ve,B as Ne}from"./back-icon-BgRy0Fa2.js";const je="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%20preserveAspectRatio='xMidYMid'%20width='200'%20height='200'%20style='shape-rendering:%20auto;%20display:%20block;'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cg%3e%3cg%20transform='translate(80,50)'%3e%3cg%20transform='rotate(0)'%3e%3ccircle%20fill-opacity='1'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.875s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.875s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(71.21320343559643,71.21320343559643)'%3e%3cg%20transform='rotate(45)'%3e%3ccircle%20fill-opacity='0.875'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.75s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.75s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(50,80)'%3e%3cg%20transform='rotate(90)'%3e%3ccircle%20fill-opacity='0.75'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.625s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.625s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(28.786796564403577,71.21320343559643)'%3e%3cg%20transform='rotate(135)'%3e%3ccircle%20fill-opacity='0.625'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.5s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.5s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(20,50.00000000000001)'%3e%3cg%20transform='rotate(180)'%3e%3ccircle%20fill-opacity='0.5'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.375s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.375s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(28.78679656440357,28.786796564403577)'%3e%3cg%20transform='rotate(225)'%3e%3ccircle%20fill-opacity='0.375'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.25s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.25s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(49.99999999999999,20)'%3e%3cg%20transform='rotate(270)'%3e%3ccircle%20fill-opacity='0.25'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.125s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.125s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(71.21320343559643,28.78679656440357)'%3e%3cg%20transform='rotate(315)'%3e%3ccircle%20fill-opacity='0.125'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='0s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='0s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/g%3e%3c!--%20[ldio]%20generated%20by%20https://loading.io%20--%3e%3c/svg%3e",Be="/assets/acceptet-BiKVjkxi.svg",Me={class:"balance-panel"},Le={class:"balance-hint"},Ue={class:"balance__wrapper"},ze={key:0,style:{display:"flex",justifyContent:"center"}},Fe=ne({__name:"DonateBalance",props:{popupState:{type:Function}},setup(D){var h;const t=ge(),g=D,k=we(()=>{var b,T;const u=((T=(b=t.user)==null?void 0:b.posts_balance)==null?void 0:T.toString().length)||0;return u<5?"44px":u<8?"39px":u<12?"34px":u<15?"29px":"24px"}),w=y(((h=t.user)==null?void 0:h.posts_balance)||0);function I(u){const b=w.value,T=u-b;let O=900;T<=10&&(O=300);const K=performance.now();function H(q){const Z=q-K,U=Math.min(Z/O,1);w.value=Math.round(b+T*U),U<1&&requestAnimationFrame(H)}requestAnimationFrame(H)}De(()=>{var u;return((u=t.user)==null?void 0:u.posts_balance)??0},u=>{I(u)},{immediate:!0});const f=()=>{g.popupState("change")};return(u,b)=>{var T;return i(),a(R,null,[e("div",Me,[e("span",Le,d(u.$t("account.yourDonateBalance")),1),e("div",Ue,[e("div",{class:"balance",style:se({fontSize:k.value})},d(w.value.toLocaleString()),5)])]),((T=m(t).user)==null?void 0:T.posts_balance)!=null&&m(t).user.posts_balance>0?(i(),a("div",ze,[e("div",{style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},[e("button",{class:"boost-purchase-button",onClick:f},"Обменять")])])):p("",!0)],64)}}}),Re=oe(Fe,[["__scopeId","data-v-14da8650"]]),Oe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M3%2010C3%206.22876%203%204.34315%204.17157%203.17157C5.34315%202%207.22876%202%2011%202H13C16.7712%202%2018.6569%202%2019.8284%203.17157C21%204.34315%2021%206.22876%2021%2010V14C21%2017.7712%2021%2019.6569%2019.8284%2020.8284C18.6569%2022%2016.7712%2022%2013%2022H11C7.22876%2022%205.34315%2022%204.17157%2020.8284C3%2019.6569%203%2017.7712%203%2014V10ZM6%2012C6%2010.5858%206%209.87868%206.43934%209.43934C6.87868%209%207.58579%209%209%209H15C16.4142%209%2017.1213%209%2017.5607%209.43934C18%209.87868%2018%2010.5858%2018%2012V16C18%2017.4142%2018%2018.1213%2017.5607%2018.5607C17.1213%2019%2016.4142%2019%2015%2019H9C7.58579%2019%206.87868%2019%206.43934%2018.5607C6%2018.1213%206%2017.4142%206%2016V12ZM7%205.25C6.58579%205.25%206.25%205.58579%206.25%206C6.25%206.41421%206.58579%206.75%207%206.75H12C12.4142%206.75%2012.75%206.41421%2012.75%206C12.75%205.58579%2012.4142%205.25%2012%205.25H7Z'%20fill='%231C274C'/%3e%3c/svg%3e",ie=D=>(me("data-v-40b3c399"),D=D(),he(),D),We={class:"navMenu"},He={key:0,style:{width:"100%",display:"flex",justifyContent:"flex-end"}},Ee={class:"nav-btn__wrapper",style:{marginRight:"30px",display:"flex",flexDirection:"column",gap:"25px"}},Ye={key:0},Ge=ie(()=>e("span",{style:{fontSize:"20px"}},"💎",-1)),Ke=[Ge],qe={key:1},Ze=ie(()=>e("span",{style:{fontSize:"20px"}},"🗓️",-1)),Xe=[Ze],Je=ie(()=>e("span",{style:{fontSize:"20px"}},"🔎",-1)),Qe=[Je],et={class:"nav-btn__wrapper"},tt=["src"],st=["src"],nt=["src"],ot=["src"],it={class:"nav-btn__text"},at={key:3,class:"nav-btn__text-item"},lt=ne({__name:"NavMenu",props:{pageState:{},onFilterPostsBy:{type:Function}},emits:["change-page-state"],setup(D,{emit:t}){const g=D,k=t,w=h=>{h!==g.pageState&&k("change-page-state",h)},I=y(!1),f=h=>{g.onFilterPostsBy(h),I.value=!1};return(h,u)=>(i(),a("div",We,[g.pageState=="posts"?(i(),a("div",He,[e("div",Ee,[I.value?(i(),a("div",Ye,[e("button",{class:"post-component__nav-btn feed",style:{display:"flex",justifyContent:"center",alignItems:"center"},onClick:u[0]||(u[0]=b=>f("coin"))},Ke)])):p("",!0),I.value?(i(),a("div",qe,[e("button",{class:"post-component__nav-btn feed",style:{display:"flex",justifyContent:"center",alignItems:"center"},onClick:u[1]||(u[1]=b=>f("date"))},Xe)])):p("",!0),e("div",null,[e("button",{class:"post-component__nav-btn feed",style:{display:"flex",justifyContent:"center",alignItems:"center"},onClick:u[2]||(u[2]=()=>{I.value=!I.value})},Qe)])])])):p("",!0),e("div",et,[g.pageState!="userposts"?(i(),a("button",{key:0,class:A(["post-component__nav-btn feed",{active:g.pageState==="posts"}]),onClick:u[3]||(u[3]=b=>w("posts"))},[e("img",{src:m(Oe)},null,8,tt)],2)):p("",!0),g.pageState!="userposts"?(i(),a("button",{key:1,class:A(["post-component__nav-btn compose",{active:g.pageState==="create"}]),onClick:u[4]||(u[4]=b=>w("create"))},[e("img",{src:m(Ae)},null,8,st)],2)):p("",!0),g.pageState!="userposts"?(i(),a("button",{key:2,class:A(["post-component__nav-btn profile",{active:g.pageState==="myposts"}]),onClick:u[5]||(u[5]=b=>w("myposts"))},[e("img",{src:m(Ve)},null,8,nt)],2)):(i(),a("button",{key:3,class:"post-component__nav-btn profile",onClick:u[6]||(u[6]=b=>w("posts"))},[e("img",{src:m(Ne)},null,8,ot)]))]),e("div",it,[g.pageState!="userposts"?(i(),a("span",{key:0,class:A(["nav-btn__text-item",{active:g.pageState==="posts"}])},"Posts",2)):p("",!0),g.pageState!="userposts"?(i(),a("span",{key:1,class:A(["nav-btn__text-item",{active:g.pageState==="create"}])},"Write",2)):p("",!0),g.pageState!="userposts"?(i(),a("span",{key:2,class:A(["nav-btn__text-item",{active:g.pageState==="myposts"}])},"Profile",2)):(i(),a("span",at,"Back"))])]))}}),ct=oe(lt,[["__scopeId","data-v-40b3c399"]]),x=D=>(me("data-v-2d77ae1c"),D=D(),he(),D),rt=x(()=>e("div",{class:"Bg"},null,-1)),ut={key:0,class:"createPostMenu"},dt={id:"progressbar"},pt={class:"createForm"},ft={key:0,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},vt=x(()=>e("span",{style:{fontWeight:"bold",marginTop:"15px"}},"⚠️ Добавить можно только 1 изображение",-1)),gt={class:"sec-center",style:{marginTop:"20px"}},mt=x(()=>e("input",{class:"dropdown",type:"checkbox",id:"dropdown",name:"dropdown"},null,-1)),ht={class:"for-dropdown",for:"dropdown"},_t={class:"section-dropdown"},yt=x(()=>e("i",{class:"uil uil-arrow-right"},"💸",-1)),xt=x(()=>e("i",{class:"uil uil-arrow-right"},"🗳️",-1)),bt={key:1,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},kt=x(()=>e("label",{for:"fname"},"Описание(не обязательно)",-1)),Ct={key:2,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},Pt={key:0,style:{display:"flex",alignItems:"center"}},wt=x(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"Платный пост (не обязательно)",-1)),Dt={class:"checkbox-wrapper-7",style:{marginLeft:"20px"}},It=x(()=>e("label",{class:"tgl-btn",for:"cb2-7"},null,-1)),Tt={key:1,style:{display:"flex",alignItems:"center",flexDirection:"column"}},St=x(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"Цена голосования (в 🍆):",-1)),$t={key:2,style:{marginTop:"50px",textAlign:"center"}},At=x(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"Цена за разблокировку:",-1)),Vt=x(()=>e("div",{style:{marginTop:"50px",textAlign:"center"}},[e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"Стоимость создания поста: 1000🍆")],-1)),Nt={key:3},jt={key:0,style:{display:"flex",flexDirection:"column"}},Bt=["src"],Mt=x(()=>e("span",{style:{fontSize:"17px",fontWeight:"bold",marginTop:"10px"}},"Подождите, мы загружаем ваш пост...",-1)),Lt={key:1},Ut=["src"],zt={key:0,style:{display:"flex",justifyContent:"center"}},Ft={key:1,class:"boosts"},Rt={class:"post"},Ot={class:"ownerData"},Wt=["src","onClick"],Ht=["onClick"],Et=["src"],Yt={class:"postDescription"},Gt={key:0,class:"unlock",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},Kt={style:{fontSize:"14px"}},qt=["onClick"],Zt={key:1,class:"donations",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},Xt={class:"donation__counter"},Jt=["onClick"],Qt={key:2},es={class:"vote__counter"},ts={class:"vote__counter-actions"},ss={style:{display:"felx",flexDirection:"column",justifyContent:"center",textAlign:"center"}},ns={style:{fontSize:"18px"}},os=["onClick"],is={style:{display:"felx",flexDirection:"column",justifyContent:"center",textAlign:"center"}},as={style:{fontSize:"18px"}},ls=["onClick"],cs={style:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"15px"}},rs=["onClick"],us={key:2,class:"boosts"},ds={style:{fontSize:"20px",fontWeight:"bold",margin:"0 auto"}},ps={class:"post"},fs={class:"ownerData"},vs=["src"],gs=["src"],ms={class:"postDescription"},hs={key:0,class:"unlock",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},_s={style:{fontSize:"14px"}},ys=["onClick"],xs={key:1,class:"donations",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},bs={class:"donation__counter"},ks=["onClick"],Cs={key:2},Ps={class:"vote__counter"},ws={class:"vote__counter-actions"},Ds={style:{display:"felx",flexDirection:"column",justifyContent:"center",textAlign:"center"}},Is={style:{fontSize:"18px"}},Ts=["onClick"],Ss={style:{display:"felx",flexDirection:"column",justifyContent:"center",textAlign:"center"}},$s={style:{fontSize:"18px"}},As=["onClick"],Vs={style:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"15px"}},Ns=["onClick"],js={class:"popup-content"},Bs={class:"popup-header"},Ms=x(()=>e("svg",{class:"close-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"16px",height:"16px"},[e("path",{d:"M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"})],-1)),Ls=[Ms],Us={key:0,class:"popup-body"},zs=x(()=>e("p",null,"Price:",-1)),Fs={key:1,class:"popup-body"},Rs={class:"slidecontainer",style:{marginTop:"30px"}},Os=["max"],Ws={key:2,class:"popup-body"},Hs=x(()=>e("p",null," Не нравится пост? ",-1)),Es={class:"slidecontainer",style:{marginTop:"30px"}},Ys=["max"],Gs={key:3},Ks=["src"],qs={key:0},Zs={key:4},Xs={class:"slidecontainer",style:{marginTop:"30px"}},Js=["max"],Qs={key:3,class:"myPosts"},en=["onClick"],tn=x(()=>e("div",{class:"icon-box",style:{fontSize:"27px"}},"🌐",-1)),sn={class:"text-container",style:{display:"flex",justifyContent:"center"}},nn={style:{marginLeft:"11px"}},on=ne({__name:"Posts",setup(D){Ie();const t=ge();t.getBoosts(),y(!1),y(!1);const g="https://taptaptap.coinclicker.app",k=y("posts"),w=y(!1);y("");const I=y(!1),f=y({image:null,isPrivate:!1,description:"",type:"",price:0,votePrice:0}),h=y(0),u=[{id:0,isActive:!0,text:"Add image"},{id:1,isActive:!1,text:"Write description"},{id:2,isActive:!1,text:"Choose Details"}],b=o=>{if(t.posts==null)return[];const n=t.posts.filter(c=>c.Type!=="vote").sort((c,v)=>v.Donated-c.Donated),l=t.posts.filter(c=>c.Type==="vote").sort((c,v)=>v.VoteYes+v.VoteNo-(c.VoteYes+c.VoteNo));return[...n,...l]};async function T(){try{await Promise.all([t.getMyBoughtPosts(),t.getPosts().then(o=>{if(o){if(t.posts==null)return;let n=b(t.posts);t.posts=n;const l=t.posts.filter(r=>r.Type==="donate"),c=t.posts.filter(r=>r.Type==="vote"),v=[];for(;l.length>0||c.length>0;){if(l.length>0){const r=l.shift();r!==void 0&&v.push(r)}if(c.length>0){const r=c.shift();r!==void 0&&v.push(r)}}t.posts=v}}),t.getMyPosts()])}catch(o){console.error("Error fetching user data:",o)}}async function O(){try{await Promise.all([t.getMyBoughtPosts(),t.getPosts().then(o=>{if(o){if(t.posts==null)return;let n=b(t.posts);t.posts=n;const l=t.posts.filter(r=>r.Type==="donate"),c=t.posts.filter(r=>r.Type==="vote"),v=[];for(;l.length>0||c.length>0;){if(l.length>0){const r=l.shift();r!==void 0&&v.push(r)}if(c.length>0){const r=c.shift();r!==void 0&&v.push(r)}}t.posts=v,t.posts=t.posts.filter(r=>r.CreatedAt!==null).filter(r=>r.CreatedAt&&new Date(r.CreatedAt).toString()!=="Invalid Date").sort((r,S)=>new Date(S.CreatedAt||new Date).getTime()-new Date(r.CreatedAt||new Date).getTime())}}),t.getMyPosts()])}catch(o){console.error("Error fetching user data:",o)}}Te(()=>{k.value="posts",O()});const K=o=>{o!==k.value&&(k.value=o)},H=o=>{const l=o.target.files;if(l&&l.length>0){const c=l[0],v=new FileReader;v.onload=r=>{var s;const S=new Image;S.onload=()=>{const j=document.createElement("canvas"),P=j.getContext("2d"),ee=1024,te=1024;let B=S.width,M=S.height;B>M?B>ee&&(M*=ee/B,B=ee):M>te&&(B*=te/M,M=te),j.width=B,j.height=M,P!=null&&P.drawImage(S,0,0,B,M),j.toBlob(de=>{de&&(f.value.image=new File([de],c.name,{type:c.type}),I.value=!0)},c.type,.8)},S.src=(s=r.target)==null?void 0:s.result},v.readAsDataURL(c)}},q=o=>{console.log(1);const l=o.target.value;l&&(f.value.description=l),console.log(f)},Z=()=>{h.value!==0&&(I.value=!1),h.value++,u[h.value].isActive=!0},U=y(!1),X=()=>{if(t.user){if(t.user.balance<1e3){$().showAlert("Недостаточно 🍆 для создания поста");return}if(f.value.type!="vote"){if(f.value.price<=0&&f.value.isPrivate){$().showAlert("Стоимость открытия поста не может быть 0 🍆");return}}else if(f.value.votePrice<10){$().showAlert("Стоимость голосования поста не может быть меньше 10 🍆");return}if(f.value.isPrivate=w.value,f.value.image!=null){const o={image:f.value.image,isPrivate:f.value.isPrivate,description:f.value.description,price:f.value.price,type:f.value.type,votePrice:f.value.votePrice};h.value++,t.createPost(o).then(n=>{n&&setTimeout(()=>{h.value=0,k.value="posts",u.forEach(l=>{l.id!==0&&(l.isActive=!1)}),U.value=!0,U.value=!1,t.getPosts(),t.getMyPosts()},2500)})}else $().showAlert("Не выбрано изображение")}},C=y("close"),_=y({id:0,price:0,imagePath:"",decription:"",donated:0}),z=(o,n,l,c,v,r)=>{if(o=="dump"&&t.user!=null&&t.user.balance<1e3){$().showAlert("Недостаточно средств. Минимум 1000 🍆");return}C.value=o,_.value.id=n,_.value.price=l,_.value.imagePath=c!==null?c:"",_.value.decription=v!==null?v:"",_.value.donated=r!==null?r:0},_e=()=>{if(t.user){if(t.user.balance<_.value.price){$().showAlert("Недостаточно средств на счету");return}console.log(_.value.id),t.unlockPost(_.value.id).then(o=>{if(o&&t.posts!=null){let n=t.posts.findIndex(l=>l.ID==_.value.id);n!=-1&&(t.posts[n].IsPrivate=!1,t.getMyBoughtPosts())}})}},ae=(o,n)=>{var l;if(t.user){if(t.posts!=null&&t.posts[t.posts.findIndex(c=>c.ID==o)].Type!="donate"||t.user.id==n||t.posts!=null&&!t.posts[t.posts.findIndex(c=>c.ID==o)].IsPrivate)return!1;if(t.posts!=null&&t.posts[t.posts.findIndex(c=>c.ID==o)].IsPrivate)if(t.boughtPosts!=null){if(t.boughtPosts.length<0)return!0;if(((l=t.boughtPosts)==null?void 0:l.length)>0)return t.boughtPosts.findIndex(c=>c.PostID==o)==-1}else return!0}},le=(o,n)=>{if(t.user)return t.user.id==o||t.posts!=null&&!t.posts[t.posts.findIndex(l=>l.ID==n)].IsPrivate?!1:o!=t.user.id?!ye(n):!0},ye=o=>{if(t.boughtPosts!=null&&t.boughtPosts.length>0){let n=t.boughtPosts.findIndex(l=>l.PostID==o);if(console.log(n,o),n!=-1)return console.log(n),!0}return!1},V=y(0),xe=()=>{if(t.user){if(t.user.balance<Number(V.value)){$().showAlert("Недостаточно средств на счету");return}t.donatePost(_.value.id,V.value).then(o=>{if(o&&t.posts!=null){let n=t.posts.findIndex(l=>l.ID==_.value.id);n!=-1&&(t.posts[n].Donated+=Number(V.value))}})}},be=o=>{switch(o){case"unlock":return"Unlock post?";case"donate":return"Donate post?";case"visible":return`Post: ${_.value.id}`;case"change":return"Exchange donated dicks for basic ones?";case"dump":return"Dump post?"}},N=y(0),ke=()=>{t.user&&(t.user.posts_balance!=null&&t.user.posts_balance<N.value&&$().showAlert("ⓘ Недостаточно средств для вывода!"),$().showAlert("ⓘ Система удерживает 30% комиссию при переводе средств с донатного счёта на основной! ⓘ"),t.exchangeDonateMoney(N.value).then(o=>{var n;o&&((n=t.user)==null?void 0:n.posts_balance)!=null&&(t.user.posts_balance-=N.value)}))},ce=o=>{f.value.type=o},Ce=o=>{switch(o){case"donate":return"Донатный 💸";case"vote":return"Голосование 🗳️"}return""},E=(o,n,l)=>{if(t.user){if(t.user.balance<l){$().showAlert("Недостаточно 🍆 для голосования");return}t.votePost(o,n).then(c=>{if(c&&t.posts!=null){let v=t.posts.findIndex(r=>r.ID==o);if(v!=-1)switch(n){case"yes":t.posts[v].VoteYes+=1;break;case"no":t.posts[v].VoteNo+=1;break}}})}},J=o=>{o.target.blur()},Y=y(0),Q=o=>{t.dumpPost(o,1e3).then(n=>{n&&O()})};let F=y(void 0),re="";const ue=o=>{t.posts&&t.posts.length>0?(F.value=t.posts.filter(n=>n.OwnerID===o),F.value!=null&&F.value&&(k.value="userposts",re=F.value[0].OwnerName)):F.value=[]},Pe=o=>{if(t.posts!=null)switch(o){case"coin":T();break;case"date":t.posts=t.posts.filter(n=>n.CreatedAt!==null).filter(n=>n.CreatedAt&&new Date(n.CreatedAt).toString()!=="Invalid Date").sort((n,l)=>new Date(l.CreatedAt||new Date).getTime()-new Date(n.CreatedAt||new Date).getTime());break}};return(o,n)=>{var c,v,r,S;const l=Se("click-outside");return i(),a(R,null,[rt,pe(ct,{"page-state":k.value,onChangePageState:K,onFilterPostsBy:Pe},null,8,["page-state"]),k.value==="create"?(i(),a("div",ut,[e("div",null,[e("ul",dt,[(i(),a(R,null,G(u,s=>e("li",{class:A(s.isActive?"active":"")},d(s.text),3)),64))])]),e("div",pt,[h.value===0?(i(),a("div",ft,[e("input",{class:"addFile",type:"file",onChange:H},null,32),vt,e("div",gt,[mt,e("label",ht,d(f.value.type==""?"Выберите тип поста":Ce(f.value.type)),1),e("div",_t,[e("a",{onClick:n[0]||(n[0]=s=>ce("donate"))},[fe("Донатный "),yt]),e("a",{onClick:n[1]||(n[1]=s=>ce("vote"))},[fe("Голосование "),xt])])])])):p("",!0),h.value===1?(i(),a("div",bt,[kt,L(e("input",{type:"text",id:"fname",onChange:q,name:"fname"},null,544),[[l,J]])])):p("",!0),h.value===2?(i(),a("div",Ct,[f.value.type!="vote"?(i(),a("div",Pt,[wt,e("div",Dt,[L(e("input",{class:"tgl tgl-ios",id:"cb2-7",type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=s=>w.value=s)},null,512),[[$e,w.value]]),It])])):p("",!0),f.value.type=="vote"?(i(),a("div",Tt,[St,L(e("input",{type:"number",onKeydown:ve(X,["enter"]),"onUpdate:modelValue":n[3]||(n[3]=s=>f.value.votePrice=s),style:{width:"100%"}},null,544),[[l,J],[W,f.value.votePrice]])])):p("",!0),w.value?(i(),a("div",$t,[At,L(e("input",{type:"number",onKeydown:ve(X,["enter"]),"onUpdate:modelValue":n[4]||(n[4]=s=>f.value.price=s)},null,544),[[l,J],[W,f.value.price]])])):p("",!0),Vt,e("div",null,[e("button",{class:"mypost-button",style:{marginTop:"30px"},onClick:X},"Создать")])])):p("",!0),h.value===3?(i(),a("div",Nt,[U.value?(i(),a("div",Lt,[e("img",{src:m(Be)},null,8,Ut)])):(i(),a("div",jt,[e("img",{src:m(je)},null,8,Bt),Mt]))])):p("",!0)]),I.value?(i(),a("div",zt,[e("button",{class:"mypost-button",style:{marginTop:"30px"},onClick:Z},"Дальше")])):p("",!0)])):p("",!0),k.value==="posts"?(i(),a("div",Ft,[(i(!0),a(R,null,G(m(t).posts,(s,j)=>(i(),a("div",{key:s.ID,style:{width:"100%"}},[e("div",Rt,[e("div",Ot,[e("img",{src:s.AvatarURL.includes("uploads")?`${m(g)}/${s.AvatarURL}`:s.AvatarURL,onClick:P=>ue(s.OwnerID)},null,8,Wt),e("span",{onClick:P=>ue(s.OwnerID)},d(s.OwnerName),9,Ht)]),e("div",{class:"postImage",style:se({filter:le(s.OwnerID,s.ID)?"blur(25px)":"blur(0px)"})},[e("img",{src:s.ImagePath.includes("uploads")?`${m(g)}/${s.ImagePath}`:s.ImagePath,style:{maxWidth:"100%",height:"auto",width:"100%"}},null,8,Et)],4),e("div",Yt,[e("span",null,d(s.Description),1)]),ae(s.ID,s.OwnerID)?(i(),a("div",Gt,[e("span",Kt,"🍆"+d(s.Price),1),e("button",{class:"boost-purchase-button",onClick:P=>z("unlock",s.ID,s.Price,null,null,null)},"Unlock",8,qt)])):p("",!0),s.Type!="vote"?(i(),a("div",Zt,[e("span",Xt,"Donated: 🍆"+d(s.Donated-s.Dumped),1),e("button",{class:"boost-purchase-button",onClick:P=>z("donate",s.ID,s.Price,null,null,null)},"Donate",8,Jt)])):(i(),a("div",Qt,[e("div",es,[e("span",null,"Всего: "+d((s.VoteYes+s.VoteNo)*s.VotePrice-s.Dumped)+"🍆",1)]),e("div",ts,[e("div",ss,[e("span",ns,d(s.VoteYes)+" ✅",1),e("button",{class:"boost-purchase-button",style:{marginLeft:"15px",marginTop:"10px",height:"40px",backgroundColor:"#3f8b1e",display:"flex",justifyContent:"center",alignItems:"center"},onClick:P=>E(s.ID,"yes",s.VotePrice)},"Да "+d(s.VotePrice)+"🍆",9,os)]),e("div",is,[e("span",as,d(s.VoteNo)+" ❌",1),e("button",{class:"boost-purchase-button",style:{marginRight:"15px",marginTop:"10px",height:"40px",backgroundColor:"#bc0e0e",display:"flex",justifyContent:"center",alignItems:"center"},onClick:P=>E(s.ID,"no",s.VotePrice)},"Нет "+d(s.VotePrice)+"🍆",9,ls)])])])),e("div",cs,[e("button",{class:"boost-purchase-button",style:{padding:"15px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center"},onClick:P=>Q(s.ID)},"😡 Dump 1.000 🍆",8,rs)])])]))),128))])):p("",!0),k.value==="userposts"?(i(),a("div",us,[e("span",ds," Посты пользователя: "+d(m(re)),1),(i(!0),a(R,null,G(m(F),(s,j)=>(i(),a("div",{key:s.ID,style:{width:"100%"}},[e("div",ps,[e("div",fs,[e("img",{src:s.AvatarURL.includes("uploads")?`${m(g)}/${s.AvatarURL}`:s.AvatarURL},null,8,vs),e("span",null,d(s.OwnerName),1)]),e("div",{class:"postImage",style:se({filter:le(s.OwnerID,s.ID)?"blur(25px)":"blur(0px)"})},[e("img",{src:s.ImagePath.includes("uploads")?`${m(g)}/${s.ImagePath}`:s.ImagePath,style:{maxWidth:"100%",height:"auto",width:"100%"}},null,8,gs)],4),e("div",ms,[e("span",null,d(s.Description),1)]),ae(s.ID,s.OwnerID)?(i(),a("div",hs,[e("span",_s,"🍆"+d(s.Price),1),e("button",{class:"boost-purchase-button",onClick:P=>z("unlock",s.ID,s.Price,null,null,null)},"Unlock",8,ys)])):p("",!0),s.Type!="vote"?(i(),a("div",xs,[e("span",bs,"Donated: 🍆"+d(s.Donated-s.Dumped),1),e("button",{class:"boost-purchase-button",onClick:P=>z("donate",s.ID,s.Price,null,null,null)},"Donate",8,ks)])):(i(),a("div",Cs,[e("div",Ps,[e("span",null,"Всего: "+d((s.VoteYes+s.VoteNo)*s.VotePrice-s.Dumped)+"🍆",1)]),e("div",ws,[e("div",Ds,[e("span",Is,d(s.VoteYes)+" ✅",1),e("button",{class:"boost-purchase-button",style:{marginLeft:"15px",marginTop:"10px",height:"40px",backgroundColor:"#3f8b1e",display:"flex",justifyContent:"center",alignItems:"center"},onClick:P=>E(s.ID,"yes",s.VotePrice)},"Да "+d(s.VotePrice)+"🍆",9,Ts)]),e("div",Ss,[e("span",$s,d(s.VoteNo)+" ❌",1),e("button",{class:"boost-purchase-button",style:{marginRight:"15px",marginTop:"10px",height:"40px",backgroundColor:"#bc0e0e",display:"flex",justifyContent:"center",alignItems:"center"},onClick:P=>E(s.ID,"no",s.VotePrice)},"Нет "+d(s.VotePrice)+"🍆",9,As)])])])),e("div",Vs,[e("button",{class:"boost-purchase-button",style:{padding:"15px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center"},onClick:P=>Q(s.ID)},"😡 Dump 1.000 🍆",8,Ns)])])]))),128))])):p("",!0),e("div",{class:A(["boost-purchase-popup",{visible:C.value=="unlock"||C.value=="donate"||C.value=="visible"||C.value=="change"||C.value=="dump"}]),onClick:n[10]||(n[10]=()=>{C.value="close"})},[e("div",js,[e("div",Bs,[e("h2",null,d(be(C.value)),1),e("button",{class:"close-button",onClick:n[5]||(n[5]=()=>{C.value="close"})},Ls)]),C.value=="unlock"?(i(),a("div",Us,[zs,e("p",null,"🍆"+d(_.value.price),1),e("button",{class:"boost-purchase-button",style:{width:"100%"},onClick:_e},"Unlock post")])):p("",!0),C.value=="donate"?(i(),a("div",Fs,[e("div",Rs,[L(e("input",{type:"range",min:"0",max:(c=m(t).user)==null?void 0:c.balance,class:"slider",id:"myRange","onUpdate:modelValue":n[6]||(n[6]=s=>V.value=s)},null,8,Os),[[W,V.value]])]),e("p",null,"🍆"+d(V.value),1),V.value>0?(i(),a("button",{key:0,class:"boost-purchase-button",style:{width:"100%"},onClick:xe},"Donate post")):p("",!0)])):p("",!0),C.value=="dump"?(i(),a("div",Ws,[Hs,e("div",Es,[L(e("input",{type:"range",min:"1000",max:(v=m(t).user)==null?void 0:v.balance,step:"1000",class:"slider",id:"myRange","onUpdate:modelValue":n[7]||(n[7]=s=>Y.value=s)},null,8,Ys),[[W,Y.value]])]),e("p",null,"🍆"+d(Y.value),1),Y.value>=1e3?(i(),a("button",{key:0,class:"boost-purchase-button",style:{width:"100%"},onClick:n[8]||(n[8]=s=>Q(_.value.id))},"Dump post")):p("",!0)])):p("",!0),C.value=="visible"?(i(),a("div",Gs,[e("img",{src:_.value.imagePath,style:{height:"200px",width:"100%",backgroundRepeat:"no-repeat",objectFit:"contain"}},null,8,Ks),_.value.decription!==""?(i(),a("p",qs,d(_.value.decription),1)):p("",!0),e("p",null,"Donated: 🍆"+d(_.value.donated),1)])):p("",!0),C.value=="change"?(i(),a("div",Zs,[e("div",Xs,[L(e("input",{type:"range",min:"0",max:((r=m(t).user)==null?void 0:r.posts_balance)!==null?(S=m(t).user)==null?void 0:S.posts_balance:0,class:"slider",id:"myRange","onUpdate:modelValue":n[9]||(n[9]=s=>N.value=s)},null,8,Js),[[W,N.value]])]),e("p",null,"🍆"+d(N.value),1),N.value>0?(i(),a("button",{key:0,class:"boost-purchase-button",style:{width:"100%"},onClick:ke},"Exchange")):p("",!0)])):p("",!0)])],2),k.value=="myposts"?(i(),a("div",Qs,[pe(Re,{popupState:z}),(i(!0),a(R,null,G(m(t).myPosts,s=>(i(),a("div",{class:"postProfile",onClick:j=>z("visible",s.ID,s.Price,s.ImagePath,s.Description,s.Donated)},[tn,e("div",sn,[e("span",nn,"Пост: "+d(s.ID),1)])],8,en))),256))])):p("",!0)],64)}}}),cn=oe(on,[["__scopeId","data-v-2d77ae1c"]]);export{cn as default};
