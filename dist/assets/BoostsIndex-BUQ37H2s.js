import{d as U,l as q,u as G,r as B,C as J,b as n,c as l,g as K,e as o,h as N,t,f as r,m as D,D as Q,F as M,p as R,x as W,B as d,z as X,A as Z,_ as ee}from"./index-DriXmh7Y.js";import{B as oe}from"./Balance-D-lEojnx.js";import{h as v}from"./moment-C5S46NFB.js";const p=E=>(X("data-v-553201a8"),E=E(),Z(),E),se={class:"boosts"},te=p(()=>o("div",{class:"icon-box"},"üëÜ",-1)),ae={class:"text-container"},ne={class:"badge"},le={class:"price"},ie=p(()=>o("div",{class:"icon-box"},"‚ö°Ô∏è",-1)),re={class:"text-container"},ce={key:0,class:"badge"},ue={key:1,class:"badge"},_e={key:0,class:"price"},ve=p(()=>o("div",{class:"icon-box"},"üîã",-1)),pe={class:"text-container"},de={class:"badge"},be={class:"price"},me=p(()=>o("div",{class:"icon-box"},"üë®‚Äçüåæ",-1)),ge={class:"text-container"},ye={key:0,class:"price"},he={key:1},xe=p(()=>o("div",{class:"icon-box"},"üéÅ",-1)),fe={class:"text-container"},Le={key:0},ke={key:1,class:"price"},Se={class:"popup-content"},Ce={class:"popup-header"},we=p(()=>o("svg",{class:"close-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"16px",height:"16px"},[o("path",{d:"M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"})],-1)),$e=[we],De={key:0,class:"popup-body"},Ee={class:"boost-desc-hint"},Ae={key:0},Ie={key:0,class:"price-hint"},Fe={key:1,class:"lootbox-items"},Be=p(()=>o("p",{class:"lootbox-item"},"Your gift:",-1)),Ne={key:0},Oe={key:1},Ve=U({__name:"BoostsIndex",setup(E){var V,P,z;const{t:s}=q(),e=G();e.getBoosts();const A=B(!1),O=B(!1),c=B({coin:0,energy:0,isOpen:!1});function I(){if(O.value){O.value=!1;return}A.value=!1}console.log(v((V=e.user)==null?void 0:V.daily_booster_available_at).isBefore(new Date)),console.log((P=e.user)==null?void 0:P.daily_booster_available_at.toString()),console.log(v((z=e.user)==null?void 0:z.daily_booster_available_at).toString()),console.log(new Date),console.log(v().toString());const i=B({id:"multitap",name:"üëÜ Multitap",description:"Increase amount of coins you can earn per one tap",nextLevelSpec:[""],price:1999,next_level:5,level:1,action:s("boosts.upgrade")});function b(a){var u,F,m,g,y,h,x,f,L,k,S,C,w,$,_,H,Y;if(!(!e.boosts||!e.user)){switch(a){case"multitap":if(((u=e.boosts)==null?void 0:u.mine_level_price)>e.user.balance){d().showAlert(s("account.youDontHaveEnough"));return}i.value={id:"multitap",name:"üëÜ "+s("boosts.multitap.name"),description:s("boosts.multitap.description"),nextLevelSpec:[s("boosts.multitap.nextLevelSpec")],price:(F=e.boosts)==null?void 0:F.mine_level_price,next_level:((m=e.boosts)==null?void 0:m.current_mine_level)+1,level:(g=e.boosts)==null?void 0:g.current_mine_level,action:s("boosts.upgrade")};break;case"energy":if(((y=e.boosts)==null?void 0:y.current_energy_level)>=4)return;if(((h=e.boosts)==null?void 0:h.energy_level_price)>e.user.balance){d().showAlert(s("account.youDontHaveEnough"));return}i.value={id:"energy",name:"üëÜ "+s("boosts.energy.name"),description:s("boosts.energy.description"),nextLevelSpec:[s("boosts.energy.nextLevelSpec")],price:(x=e.boosts)==null?void 0:x.energy_level_price,next_level:((f=e.boosts)==null?void 0:f.current_energy_level)+1,level:(L=e.boosts)==null?void 0:L.current_energy_level,action:s("boosts.upgrade")};break;case"max_energy":if(((k=e.boosts)==null?void 0:k.max_energy_price)>e.user.balance){d().showAlert(s("account.youDontHaveEnough"));return}i.value={id:"max_energy",name:"‚ö°Ô∏è "+s("boosts.maxEnergy.name"),description:s("boosts.maxEnergy.description"),nextLevelSpec:[s("boosts.maxEnergy.nextLevelSpec")],price:(S=e.boosts)==null?void 0:S.max_energy_price,next_level:((C=e.user)==null?void 0:C.max_energy_level)+2,level:((w=e.user)==null?void 0:w.max_energy_level)+2,action:s("boosts.upgrade")};break;case"daily_lootbox":if(v(($=e.user)==null?void 0:$.daily_booster_available_at).isAfter(v())){d().showAlert("Daily lootbox unavailable yet");return}i.value={id:"daily_lootbox",name:"üéÅ "+s("boosts.dailyLootbox.name"),description:s("boosts.dailyLootbox.description"),nextLevelSpec:[s("boosts.dailyLootbox.nextLevelSpec.balance"),s("boosts.dailyLootbox.nextLevelSpec.energy")],price:0,next_level:0,level:0,action:s("boosts.open")};break;case"auto_farmer":if((_=e.user)!=null&&_.auto_farmer){d().showAlert("Your auto farmer already works");return}if(((H=e.boosts)==null?void 0:H.auto_farmer_price)>e.user.balance){d().showAlert("You don't have enough coins to buy this");return}i.value={id:"auto_farmer",name:"üë®‚Äçüåæ "+s("boosts.autoFarmer.name"),description:s("boosts.autoFarmer.description"),nextLevelSpec:[s("boosts.autoFarmer.nextLevelSpec.value"),s("boosts.autoFarmer.nextLevelSpec.max")],price:(Y=e.boosts)==null?void 0:Y.auto_farmer_price,next_level:0,level:0,action:s("boosts.buy")};break}A.value=!0,O.value=!0}}const j=()=>{i.value.id==="daily_lootbox"?(c.value.coin=500,c.value.isOpen=!0,e.openDailyBooster().then(a=>{c.value.coin=(a==null?void 0:a.coin)??0,c.value.energy=(a==null?void 0:a.energy)??0,A.value=!0,e.user&&a&&(e.user.balance+=c.value.coin,e.user.energy+=c.value.energy,e.user.daily_booster_available_at=a.next_at)})):e.purchaseBoost(i.value.id),I()},T=()=>{c.value.isOpen=!1,c.value.coin=0,c.value.energy=0,I()};return(a,u)=>{var m,g,y,h,x,f,L,k,S,C,w,$;const F=J("click-outside");return n(),l(M,null,[K(oe),o("div",se,[o("div",{class:"boost",onClick:u[0]||(u[0]=_=>b("multitap"))},[te,o("div",ae,[o("div",null,[N(t(a.$t("boosts.multitap.name")),1),o("span",ne,t((m=r(e).boosts)==null?void 0:m.current_mine_level)+" "+t(a.$t("boosts.level")),1)]),o("div",le,"üê• "+t((g=r(e).boosts)==null?void 0:g.mine_level_price.toLocaleString()),1)])]),o("div",{class:"boost",onClick:u[1]||(u[1]=_=>b("energy"))},[ie,o("div",re,[o("div",null,[N(t(a.$t("boosts.energy.name"))+" ",1),(((y=r(e).boosts)==null?void 0:y.current_energy_level)??0)<4?(n(),l("span",ce,t((h=r(e).boosts)==null?void 0:h.current_energy_level)+" "+t(a.$t("boosts.level")),1)):(n(),l("span",ue,t(a.$t("boosts.maxLevelShort")),1))]),(((x=r(e).boosts)==null?void 0:x.current_energy_level)??0)<4?(n(),l("div",_e,"üê• "+t((f=r(e).boosts)==null?void 0:f.energy_level_price.toLocaleString()),1)):D("",!0)])]),o("div",{class:"boost",onClick:u[2]||(u[2]=_=>b("max_energy"))},[ve,o("div",pe,[o("div",null,[N(t(a.$t("boosts.maxEnergy.name")),1),o("span",de,t((((L=r(e).user)==null?void 0:L.max_energy_level)??0)+1)+" "+t(a.$t("boosts.level")),1)]),o("div",be,"üê• "+t((k=r(e).boosts)==null?void 0:k.max_energy_price.toLocaleString()),1)])]),o("div",{class:"boost daily-boost",onClick:u[3]||(u[3]=_=>b("auto_farmer"))},[me,o("div",ge,[o("div",null,t(a.$t("boosts.autoFarmer.name")),1),((S=r(e).user)==null?void 0:S.auto_farmer)??!1?(n(),l("div",he,"‚úÖ Enabled")):(n(),l("div",ye,"üê• "+t((C=r(e).boosts)==null?void 0:C.auto_farmer_price.toLocaleString()),1))])]),o("div",{class:"boost daily-boost",onClick:u[4]||(u[4]=_=>b("daily_lootbox"))},[xe,o("div",fe,[o("div",null,t(a.$t("boosts.dailyLootbox.name")),1),r(v)((w=r(e).user)==null?void 0:w.daily_booster_available_at).isBefore(r(v)())?(n(),l("div",Le,t(a.$t("boosts.available")),1)):(n(),l("div",ke,"‚è≥ "+t(r(v)((($=r(e).user)==null?void 0:$.daily_booster_available_at)??new Date).fromNow()),1))])])]),o("div",{class:W(["boost-purchase-popup",{visible:A.value}])},[Q((n(),l("div",Se,[o("div",Ce,[o("h2",null,t(i.value.name),1),o("button",{class:"close-button",onClick:I},$e)]),c.value.isOpen?(n(),l("div",Fe,[Be,c.value.coin>0?(n(),l("p",Ne,"üê• +"+t(c.value.coin),1)):D("",!0),c.value.energy>0?(n(),l("p",Oe,"‚ö°Ô∏è +"+t(c.value.energy),1)):D("",!0),o("button",{style:{"margin-top":"10px"},class:"boost-purchase-button",onClick:T},"Claim")])):(n(),l("div",De,[o("p",null,t(i.value.description),1),(n(!0),l(M,null,R(i.value.nextLevelSpec,_=>(n(),l("p",Ee,t(_),1))),256)),i.value.price!=0?(n(),l("p",Ae,[N("üê•"+t(i.value.price.toLocaleString()),1),i.value.next_level!=0?(n(),l("span",Ie,"/ "+t(i.value.next_level)+" level",1)):D("",!0)])):D("",!0),o("button",{class:"boost-purchase-button",onClick:j},t(i.value.action),1)]))])),[[F,I]])],2)],64)}}}),Ye=ee(Ve,[["__scopeId","data-v-553201a8"]]);export{Ye as default};
