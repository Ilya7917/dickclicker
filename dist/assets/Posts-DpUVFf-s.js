import{d as X,u as ie,B as ge,r as b,C as he,b as i,c as l,e,t as p,n as le,f as x,m as u,F as R,_ as J,v as V,l as ye,o as _e,q as be,g as ne,p as Z,h as oe,x as L,I as xe,G as U,H as ae,y as S,z as Ce,A as ke}from"./index-D_dUKgbW.js";import{A as Pe,P as we}from"./profile-icon-Cs9u1iak.js";const Ie="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20100%20100'%20preserveAspectRatio='xMidYMid'%20width='200'%20height='200'%20style='shape-rendering:%20auto;%20display:%20block;'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cg%3e%3cg%20transform='translate(80,50)'%3e%3cg%20transform='rotate(0)'%3e%3ccircle%20fill-opacity='1'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.875s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.875s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(71.21320343559643,71.21320343559643)'%3e%3cg%20transform='rotate(45)'%3e%3ccircle%20fill-opacity='0.875'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.75s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.75s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(50,80)'%3e%3cg%20transform='rotate(90)'%3e%3ccircle%20fill-opacity='0.75'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.625s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.625s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(28.786796564403577,71.21320343559643)'%3e%3cg%20transform='rotate(135)'%3e%3ccircle%20fill-opacity='0.625'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.5s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.5s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(20,50.00000000000001)'%3e%3cg%20transform='rotate(180)'%3e%3ccircle%20fill-opacity='0.5'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.375s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.375s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(28.78679656440357,28.786796564403577)'%3e%3cg%20transform='rotate(225)'%3e%3ccircle%20fill-opacity='0.375'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.25s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.25s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(49.99999999999999,20)'%3e%3cg%20transform='rotate(270)'%3e%3ccircle%20fill-opacity='0.25'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='-0.125s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='-0.125s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%20transform='translate(71.21320343559643,28.78679656440357)'%3e%3cg%20transform='rotate(315)'%3e%3ccircle%20fill-opacity='0.125'%20fill='%2327ff00'%20r='6'%20cy='0'%20cx='0'%3e%3canimateTransform%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20values='1.5%201.5;1%201'%20begin='0s'%20type='scale'%20attributeName='transform'%3e%3c/animateTransform%3e%3canimate%20begin='0s'%20values='1;0'%20repeatCount='indefinite'%20dur='1s'%20keyTimes='0;1'%20attributeName='fill-opacity'%3e%3c/animate%3e%3c/circle%3e%3c/g%3e%3c/g%3e%3cg%3e%3c/g%3e%3c/g%3e%3c!--%20[ldio]%20generated%20by%20https://loading.io%20--%3e%3c/svg%3e",Te="/assets/acceptet-BiKVjkxi.svg",De={class:"balance-panel"},Se={class:"balance-hint"},Ve={class:"balance__wrapper"},Ne={key:0,style:{display:"flex",justifyContent:"center"}},Ae=X({__name:"DonateBalance",props:{popupState:{type:Function}},setup(I){var P;const t=ie(),v=I,T=ge(()=>{var w,k;const _=((k=(w=t.user)==null?void 0:w.posts_balance)==null?void 0:k.toString().length)||0;return _<5?"44px":_<8?"39px":_<12?"34px":_<15?"29px":"24px"}),C=b(((P=t.user)==null?void 0:P.posts_balance)||0);function r(_){const w=C.value,k=_-w;let H=900;k<=10&&(H=300);const G=performance.now();function W(z){const F=z-G,h=Math.min(F/H,1);C.value=Math.round(w+k*h),h<1&&requestAnimationFrame(W)}requestAnimationFrame(W)}he(()=>{var _;return((_=t.user)==null?void 0:_.posts_balance)??0},_=>{r(_)},{immediate:!0});const m=()=>{v.popupState("change")};return(_,w)=>{var k;return i(),l(R,null,[e("div",De,[e("span",Se,p(_.$t("account.yourDonateBalance")),1),e("div",Ve,[e("div",{class:"balance",style:le({fontSize:T.value})},p(C.value.toLocaleString()),5)])]),((k=x(t).user)==null?void 0:k.posts_balance)!=null&&x(t).user.posts_balance>0?(i(),l("div",Ne,[e("div",{style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},[e("button",{class:"boost-purchase-button",onClick:m},"–û–±–º–µ–Ω—è—Ç—å")])])):u("",!0)],64)}}}),$e=J(Ae,[["__scopeId","data-v-14da8650"]]),Me="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M3%2010C3%206.22876%203%204.34315%204.17157%203.17157C5.34315%202%207.22876%202%2011%202H13C16.7712%202%2018.6569%202%2019.8284%203.17157C21%204.34315%2021%206.22876%2021%2010V14C21%2017.7712%2021%2019.6569%2019.8284%2020.8284C18.6569%2022%2016.7712%2022%2013%2022H11C7.22876%2022%205.34315%2022%204.17157%2020.8284C3%2019.6569%203%2017.7712%203%2014V10ZM6%2012C6%2010.5858%206%209.87868%206.43934%209.43934C6.87868%209%207.58579%209%209%209H15C16.4142%209%2017.1213%209%2017.5607%209.43934C18%209.87868%2018%2010.5858%2018%2012V16C18%2017.4142%2018%2018.1213%2017.5607%2018.5607C17.1213%2019%2016.4142%2019%2015%2019H9C7.58579%2019%206.87868%2019%206.43934%2018.5607C6%2018.1213%206%2017.4142%206%2016V12ZM7%205.25C6.58579%205.25%206.25%205.58579%206.25%206C6.25%206.41421%206.58579%206.75%207%206.75H12C12.4142%206.75%2012.75%206.41421%2012.75%206C12.75%205.58579%2012.4142%205.25%2012%205.25H7Z'%20fill='%231C274C'/%3e%3c/svg%3e",Be={class:"navMenu"},Le={class:"nav-btn__wrapper"},je=["src"],ze=["src"],Fe=["src"],Ue={class:"nav-btn__text"},Re=X({__name:"NavMenu",props:{pageState:{}},emits:["change-page-state"],setup(I,{emit:t}){const v=I,T=t,C=r=>{r!==v.pageState&&T("change-page-state",r)};return(r,m)=>(i(),l("div",Be,[e("div",Le,[e("button",{class:V(["post-component__nav-btn feed",{active:v.pageState==="posts"}]),onClick:m[0]||(m[0]=P=>C("posts"))},[e("img",{src:x(Me)},null,8,je)],2),e("button",{class:V(["post-component__nav-btn compose",{active:v.pageState==="create"}]),onClick:m[1]||(m[1]=P=>C("create"))},[e("img",{src:x(Pe)},null,8,ze)],2),e("button",{class:V(["post-component__nav-btn profile",{active:v.pageState==="myposts"}]),onClick:m[2]||(m[2]=P=>C("myposts"))},[e("img",{src:x(we)},null,8,Fe)],2)]),e("div",Ue,[e("span",{class:V(["nav-btn__text-item",{active:v.pageState==="posts"}])},"Posts",2),e("span",{class:V(["nav-btn__text-item",{active:v.pageState==="create"}])},"Write",2),e("span",{class:V(["nav-btn__text-item",{active:v.pageState==="myposts"}])},"Profile",2)])]))}}),He=J(Re,[["__scopeId","data-v-b75ae643"]]),y=I=>(Ce("data-v-c37ad0c0"),I=I(),ke(),I),We=y(()=>e("div",{class:"Bg"},null,-1)),Ee={key:0,class:"createPostMenu"},Ye={id:"progressbar"},Ge={class:"createForm"},Ke={key:0,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},Oe=y(()=>e("span",{style:{fontWeight:"bold",marginTop:"15px"}},"‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ 1 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ",-1)),qe={class:"sec-center",style:{marginTop:"20px"}},Ze=y(()=>e("input",{class:"dropdown",type:"checkbox",id:"dropdown",name:"dropdown"},null,-1)),Xe={class:"for-dropdown",for:"dropdown"},Je={class:"section-dropdown"},Qe=y(()=>e("i",{class:"uil uil-arrow-right"},"üí∏",-1)),et=y(()=>e("i",{class:"uil uil-arrow-right"},"üó≥Ô∏è",-1)),tt={key:1,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},st=y(()=>e("label",{for:"fname"},"–û–ø–∏—Å–∞–Ω–∏–µ(–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",-1)),nt={key:2,style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},ot={key:0,style:{display:"flex",alignItems:"center"}},at=y(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"–ü–ª–∞—Ç–Ω—ã–π –ø–æ—Å—Ç (–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)",-1)),it={class:"checkbox-wrapper-7",style:{marginLeft:"20px"}},lt=y(()=>e("label",{class:"tgl-btn",for:"cb2-7"},null,-1)),ct={key:1,style:{display:"flex",alignItems:"center",flexDirection:"column"}},rt=y(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"–¶–µ–Ω–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è (–≤ üçÜ):",-1)),ut={key:2,style:{marginTop:"50px",textAlign:"center"}},dt=y(()=>e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"–¶–µ–Ω–∞ –∑–∞ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫—É:",-1)),pt=y(()=>e("div",{style:{marginTop:"50px",textAlign:"center"}},[e("span",{style:{fontSize:"15px",fontWeight:"bold"}},"–°—Ç–æ–∏–º–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞: 1000üçÜ")],-1)),ft={key:3},vt={key:0,style:{display:"flex",flexDirection:"column"}},mt=["src"],gt=y(()=>e("span",{style:{fontSize:"17px",fontWeight:"bold",marginTop:"10px"}},"–ü–æ–¥–æ–∂–¥–∏—Ç–µ, –º—ã –∑–∞–≥—Ä—É–∂–∞–µ–º –≤–∞—à –ø–æ—Å—Ç...",-1)),ht={key:1},yt=["src"],_t={key:0,style:{display:"flex",justifyContent:"center"}},bt={key:1,class:"boosts"},xt={class:"post"},Ct={class:"ownerData"},kt=["src"],Pt=["src"],wt={class:"postDescription"},It={key:0,class:"unlock",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},Tt={style:{fontSize:"14px"}},Dt=["onClick"],St={key:1,class:"donations",style:{height:"70px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"15px"}},Vt={class:"donation__counter"},Nt=["onClick"],At={key:2},$t={class:"vote__counter"},Mt={class:"vote__counter-actions"},Bt={style:{display:"felx",flexDirection:"column",justifyContent:"center",textAlign:"center"}},Lt={style:{fontSize:"18px"}},jt=["onClick"],zt={style:{display:"felx",flexDirection:"column",justifyContent:"center",textAlign:"center"}},Ft={style:{fontSize:"18px"}},Ut=["onClick"],Rt={style:{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:"15px"}},Ht=["onClick"],Wt={class:"popup-content"},Et={class:"popup-header"},Yt=y(()=>e("svg",{class:"close-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"16px",height:"16px"},[e("path",{d:"M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"})],-1)),Gt=[Yt],Kt={key:0,class:"popup-body"},Ot=y(()=>e("p",null,"Price:",-1)),qt={key:1,class:"popup-body"},Zt={class:"slidecontainer",style:{marginTop:"30px"}},Xt=["max"],Jt={key:2,class:"popup-body"},Qt=y(()=>e("p",null," –ù–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –ø–æ—Å—Ç? ",-1)),es={class:"slidecontainer",style:{marginTop:"30px"}},ts=["max"],ss={key:3},ns=["src"],os={key:0},as={key:4},is={class:"slidecontainer",style:{marginTop:"30px"}},ls=["max"],cs={key:2,class:"myPosts"},rs=["onClick"],us=y(()=>e("div",{class:"icon-box",style:{fontSize:"27px"}},"üåê",-1)),ds={class:"text-container",style:{display:"flex",justifyContent:"center"}},ps={style:{marginLeft:"11px"}},fs=X({__name:"Posts",setup(I){ye();const t=ie();t.getBoosts(),b(!1),b(!1);const v=b("posts"),T=b(!1),C=b(!1),r=b({image:null,isPrivate:!1,description:"",type:"",price:0,votePrice:0}),m=b(0),P=[{id:0,isActive:!0,text:"Add image"},{id:1,isActive:!1,text:"Write description"},{id:2,isActive:!1,text:"Choose Details"}],_=o=>{if(t.posts==null)return[];const n=t.posts.filter(c=>c.Type!=="vote").sort((c,d)=>d.Donated-c.Donated),a=t.posts.filter(c=>c.Type==="vote").sort((c,d)=>d.VoteYes+d.VoteNo-(c.VoteYes+c.VoteNo));return[...n,...a]};async function w(){try{await Promise.all([t.getMyBoughtPosts(),t.getPosts().then(o=>{if(o){if(t.posts==null)return;let n=_(t.posts);t.posts=n;const a=t.posts.filter(f=>f.Type==="donate"),c=t.posts.filter(f=>f.Type==="vote"),d=[];for(;a.length>0||c.length>0;){if(a.length>0){const f=a.shift();f!==void 0&&d.push(f)}if(c.length>0){const f=c.shift();f!==void 0&&d.push(f)}}t.posts=d}}),t.getMyPosts()])}catch(o){console.error("Error fetching user data:",o)}}_e(()=>{v.value="posts",w()});const k=o=>{o!==v.value&&(v.value=o)},H=o=>{const a=o.target.files;if(a&&a.length>0){const c=a[0],d=new FileReader;d.onload=f=>{var s;const D=new Image;D.onload=()=>{const j=document.createElement("canvas"),$=j.getContext("2d"),O=1024,q=1024;let M=D.width,B=D.height;M>B?M>O&&(B*=O/M,M=O):B>q&&(M*=q/B,B=q),j.width=M,j.height=B,$!=null&&$.drawImage(D,0,0,M,B),j.toBlob(se=>{se&&(r.value.image=new File([se],c.name,{type:c.type}),C.value=!0)},c.type,.8)},D.src=(s=f.target)==null?void 0:s.result},d.readAsDataURL(c)}},G=o=>{console.log(1);const a=o.target.value;a&&(r.value.description=a),console.log(r)},W=()=>{m.value!==0&&(C.value=!1),m.value++,P[m.value].isActive=!0},z=b(!1),F=()=>{if(t.user){if(t.user.balance<1e3){S().showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ üçÜ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞");return}if(r.value.isPrivate=T.value,r.value.image!=null){const o={image:r.value.image,isPrivate:r.value.isPrivate,description:r.value.description,price:r.value.price,type:r.value.type,votePrice:r.value.votePrice};m.value++,t.createPost(o).then(n=>{n&&setTimeout(()=>{m.value=0,v.value="posts",P.forEach(a=>{a.id!==0&&(a.isActive=!1)}),z.value=!0,z.value=!1,t.getPosts(),t.getMyPosts()},2500)})}else S().showAlert("–ù–µ –≤—ã–±—Ä–∞–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ")}},h=b("close"),g=b({id:0,price:0,imagePath:"",decription:"",donated:0}),E=(o,n,a,c,d,f)=>{if(o=="dump"&&t.user!=null&&t.user.balance<1e3){S().showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤. –ú–∏–Ω–∏–º—É–º 1000 üçÜ");return}h.value=o,g.value.id=n,g.value.price=a,g.value.imagePath=c!==null?c:"",g.value.decription=d!==null?d:"",g.value.donated=f!==null?f:0},ce=()=>{if(t.user){if(t.user.balance<g.value.price){S().showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç—É");return}console.log(g.value.id),t.unlockPost(g.value.id).then(o=>{if(o&&t.posts!=null){let n=t.posts.findIndex(a=>a.ID==g.value.id);n!=-1&&(t.posts[n].IsPrivate=!1,t.getMyBoughtPosts())}})}},re=(o,n)=>{var a;if(t.user){if(t.posts!=null&&t.posts[t.posts.findIndex(c=>c.ID==o)].Type!="donate"||t.user.id==n||t.posts!=null&&!t.posts[t.posts.findIndex(c=>c.ID==o)].IsPrivate)return!1;if(t.posts!=null&&t.posts[t.posts.findIndex(c=>c.ID==o)].IsPrivate)if(t.boughtPosts!=null){if(t.boughtPosts.length<0)return!0;if(((a=t.boughtPosts)==null?void 0:a.length)>0)return t.boughtPosts.findIndex(c=>c.PostID==o)==-1}else return!0}},ue=(o,n)=>{if(t.user)return t.user.id==o||t.posts!=null&&!t.posts[t.posts.findIndex(a=>a.ID==n)].IsPrivate?!1:o!=t.user.id?!de(n):!0},de=o=>{if(t.boughtPosts!=null&&t.boughtPosts.length>0){let n=t.boughtPosts.findIndex(a=>a.PostID==o);if(console.log(n,o),n!=-1)return console.log(n),!0}return!1},N=b(0),pe=()=>{if(t.user){if(t.user.balance<Number(N.value)){S().showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ —Å—á–µ—Ç—É");return}t.donatePost(g.value.id,N.value).then(o=>{if(o&&t.posts!=null){let n=t.posts.findIndex(a=>a.ID==g.value.id);n!=-1&&(t.posts[n].Donated+=Number(N.value))}})}},fe=o=>{switch(o){case"unlock":return"Unlock post?";case"donate":return"Donate post?";case"visible":return`Post: ${g.value.id}`;case"change":return"Exchange donated dicks for basic ones?";case"dump":return"Dump post?"}},A=b(0),ve=()=>{t.user&&(t.user.posts_balance!=null&&t.user.posts_balance<A.value&&S().showAlert("‚ìò –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –≤—ã–≤–æ–¥–∞!"),S().showAlert("‚ìò –°–∏—Å—Ç–µ–º–∞ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 30% –∫–æ–º–∏—Å—Å–∏—é –ø—Ä–∏ –ø–µ—Ä–µ–≤–æ–¥–µ —Å—Ä–µ–¥—Å—Ç–≤ —Å –¥–æ–Ω–∞—Ç–Ω–æ–≥–æ —Å—á—ë—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–π! ‚ìò"),t.exchangeDonateMoney(A.value).then(o=>{var n;o&&((n=t.user)==null?void 0:n.posts_balance)!=null&&(t.user.posts_balance-=A.value)}))},Q=o=>{r.value.type=o},me=o=>{switch(o){case"donate":return"–î–æ–Ω–∞—Ç–Ω—ã–π üí∏";case"vote":return"–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ üó≥Ô∏è"}return""},ee=(o,n,a)=>{if(t.user){if(t.user.balance<a){S().showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ üçÜ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è");return}t.votePost(o,n).then(c=>{if(c&&t.posts!=null){let d=t.posts.findIndex(f=>f.ID==o);if(d!=-1)switch(n){case"yes":t.posts[d].VoteYes+=1;break;case"no":t.posts[d].VoteNo+=1;break}}})}},K=o=>{o.target.blur()},Y=b(0),te=o=>{t.dumpPost(o,1e3).then(n=>{n&&w()})};return(o,n)=>{var c,d,f,D;const a=be("click-outside");return i(),l(R,null,[We,ne(He,{"page-state":v.value,onChangePageState:k},null,8,["page-state"]),v.value==="create"?(i(),l("div",Ee,[e("div",null,[e("ul",Ye,[(i(),l(R,null,Z(P,s=>e("li",{class:V(s.isActive?"active":"")},p(s.text),3)),64))])]),e("div",Ge,[m.value===0?(i(),l("div",Ke,[e("input",{class:"addFile",type:"file",onChange:H},null,32),Oe,e("div",qe,[Ze,e("label",Xe,p(r.value.type==""?"–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –ø–æ—Å—Ç–∞":me(r.value.type)),1),e("div",Je,[e("a",{onClick:n[0]||(n[0]=s=>Q("donate"))},[oe("–î–æ–Ω–∞—Ç–Ω—ã–π "),Qe]),e("a",{onClick:n[1]||(n[1]=s=>Q("vote"))},[oe("–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ "),et])])])])):u("",!0),m.value===1?(i(),l("div",tt,[st,L(e("input",{type:"text",id:"fname",onChange:G,name:"fname"},null,544),[[a,K]])])):u("",!0),m.value===2?(i(),l("div",nt,[r.value.type!="vote"?(i(),l("div",ot,[at,e("div",it,[L(e("input",{class:"tgl tgl-ios",id:"cb2-7",type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=s=>T.value=s)},null,512),[[xe,T.value]]),lt])])):u("",!0),r.value.type=="vote"?(i(),l("div",ct,[rt,L(e("input",{type:"number",onKeydown:ae(F,["enter"]),"onUpdate:modelValue":n[3]||(n[3]=s=>r.value.votePrice=s),style:{width:"100%"}},null,544),[[a,K],[U,r.value.votePrice]])])):u("",!0),T.value?(i(),l("div",ut,[dt,L(e("input",{type:"number",onKeydown:ae(F,["enter"]),"onUpdate:modelValue":n[4]||(n[4]=s=>r.value.price=s)},null,544),[[a,K],[U,r.value.price]])])):u("",!0),pt,e("div",null,[e("button",{class:"mypost-button",style:{marginTop:"30px"},onClick:F},"–°–æ–∑–¥–∞—Ç—å")])])):u("",!0),m.value===3?(i(),l("div",ft,[z.value?(i(),l("div",ht,[e("img",{src:x(Te)},null,8,yt)])):(i(),l("div",vt,[e("img",{src:x(Ie)},null,8,mt),gt]))])):u("",!0)]),C.value?(i(),l("div",_t,[e("button",{class:"mypost-button",style:{marginTop:"30px"},onClick:W},"–î–∞–ª—å—à–µ")])):u("",!0)])):u("",!0),v.value==="posts"?(i(),l("div",bt,[(i(!0),l(R,null,Z(x(t).posts,(s,j)=>(i(),l("div",{key:s.ID,style:{width:"100%"}},[e("div",xt,[e("div",Ct,[e("img",{src:s.AvatarURL},null,8,kt),e("span",null,p(s.OwnerName),1)]),e("div",{class:"postImage",style:le({filter:ue(s.OwnerID,s.ID)?"blur(25px)":"blur(0px)"})},[e("img",{src:s.ImagePath,style:{maxWidth:"100%",height:"auto",width:"100%"}},null,8,Pt)],4),e("div",wt,[e("span",null,p(s.Description),1)]),re(s.ID,s.OwnerID)?(i(),l("div",It,[e("span",Tt,"üçÜ"+p(s.Price),1),e("button",{class:"boost-purchase-button",onClick:$=>E("unlock",s.ID,s.Price,null,null,null)},"Unlock",8,Dt)])):u("",!0),s.Type!="vote"?(i(),l("div",St,[e("span",Vt,"Donated: üçÜ"+p(s.Donated-s.Dumped),1),e("button",{class:"boost-purchase-button",onClick:$=>E("donate",s.ID,s.Price,null,null,null)},"Donate",8,Nt)])):(i(),l("div",At,[e("div",$t,[e("span",null,"–í—Å–µ–≥–æ: "+p((s.VoteYes+s.VoteNo)*s.VotePrice-s.Dumped)+"üçÜ",1)]),e("div",Mt,[e("div",Bt,[e("span",Lt,p(s.VoteYes)+" ‚úÖ",1),e("button",{class:"boost-purchase-button",style:{marginLeft:"15px",marginTop:"10px",height:"40px",backgroundColor:"#3f8b1e",display:"flex",justifyContent:"center",alignItems:"center"},onClick:$=>ee(s.ID,"yes",s.VotePrice)},"–î–∞ "+p(s.VotePrice)+"üçÜ",9,jt)]),e("div",zt,[e("span",Ft,p(s.VoteNo)+" ‚ùå",1),e("button",{class:"boost-purchase-button",style:{marginRight:"15px",marginTop:"10px",height:"40px",backgroundColor:"#bc0e0e",display:"flex",justifyContent:"center",alignItems:"center"},onClick:$=>ee(s.ID,"no",s.VotePrice)},"–ù–µ—Ç "+p(s.VotePrice)+"üçÜ",9,Ut)])])])),e("div",Rt,[e("button",{class:"boost-purchase-button",style:{padding:"15px",height:"40px",display:"flex",justifyContent:"center",alignItems:"center"},onClick:$=>te(s.ID)},"üò° Dump 1.000 üçÜ",8,Ht)])])]))),128))])):u("",!0),e("div",{class:V(["boost-purchase-popup",{visible:h.value=="unlock"||h.value=="donate"||h.value=="visible"||h.value=="change"||h.value=="dump"}]),onClick:n[10]||(n[10]=()=>{h.value="close"})},[e("div",Wt,[e("div",Et,[e("h2",null,p(fe(h.value)),1),e("button",{class:"close-button",onClick:n[5]||(n[5]=()=>{h.value="close"})},Gt)]),h.value=="unlock"?(i(),l("div",Kt,[Ot,e("p",null,"üçÜ"+p(g.value.price),1),e("button",{class:"boost-purchase-button",style:{width:"100%"},onClick:ce},"Unlock post")])):u("",!0),h.value=="donate"?(i(),l("div",qt,[e("div",Zt,[L(e("input",{type:"range",min:"0",max:(c=x(t).user)==null?void 0:c.balance,class:"slider",id:"myRange","onUpdate:modelValue":n[6]||(n[6]=s=>N.value=s)},null,8,Xt),[[U,N.value]])]),e("p",null,"üçÜ"+p(N.value),1),N.value>0?(i(),l("button",{key:0,class:"boost-purchase-button",style:{width:"100%"},onClick:pe},"Donate post")):u("",!0)])):u("",!0),h.value=="dump"?(i(),l("div",Jt,[Qt,e("div",es,[L(e("input",{type:"range",min:"1000",max:(d=x(t).user)==null?void 0:d.balance,step:"1000",class:"slider",id:"myRange","onUpdate:modelValue":n[7]||(n[7]=s=>Y.value=s)},null,8,ts),[[U,Y.value]])]),e("p",null,"üçÜ"+p(Y.value),1),Y.value>=1e3?(i(),l("button",{key:0,class:"boost-purchase-button",style:{width:"100%"},onClick:n[8]||(n[8]=s=>te(g.value.id))},"Dump post")):u("",!0)])):u("",!0),h.value=="visible"?(i(),l("div",ss,[e("img",{src:g.value.imagePath,style:{height:"200px",width:"100%",backgroundRepeat:"no-repeat",objectFit:"contain"}},null,8,ns),g.value.decription!==""?(i(),l("p",os,p(g.value.decription),1)):u("",!0),e("p",null,"Donated: üçÜ"+p(g.value.donated),1)])):u("",!0),h.value=="change"?(i(),l("div",as,[e("div",is,[L(e("input",{type:"range",min:"0",max:((f=x(t).user)==null?void 0:f.posts_balance)!==null?(D=x(t).user)==null?void 0:D.posts_balance:0,class:"slider",id:"myRange","onUpdate:modelValue":n[9]||(n[9]=s=>A.value=s)},null,8,ls),[[U,A.value]])]),e("p",null,"üçÜ"+p(A.value),1),A.value>0?(i(),l("button",{key:0,class:"boost-purchase-button",style:{width:"100%"},onClick:ve},"Exchange")):u("",!0)])):u("",!0)])],2),v.value=="myposts"?(i(),l("div",cs,[ne($e,{popupState:E}),(i(!0),l(R,null,Z(x(t).myPosts,s=>(i(),l("div",{class:"postProfile",onClick:j=>E("visible",s.ID,s.Price,s.ImagePath,s.Description,s.Donated)},[us,e("div",ds,[e("span",ps,"–ü–æ—Å—Ç: "+p(s.ID),1)])],8,rs))),256))])):u("",!0)],64)}}}),gs=J(fs,[["__scopeId","data-v-c37ad0c0"]]);export{gs as default};
